<!-- **********************************************************************
* Author : $Author$
* Version: $Revision: 161 $
* Date   : $Date: 2011-12-17 12:31:23 +0100 (Sat, 17 Dec 2011) $
* Url    : $URL$
*********************************************************************** -->

<!-- **********************************************************************
* Copyright: (C) 2013 Gregor Cramer
*********************************************************************** -->

<!-- **********************************************************************
* This program is free software; you can redistribute it and/or modify
* it under the terms of the GNU General Public License as published by
* the Free Software Foundation; either version 2 of the License, or
* (at your option) any later version.
*********************************************************************** -->

INDEX CQL Transformationen
INDEX Transformationen (CQL)

TITLE CQL - Transformationen

<ul>
  <li><a href="#tranforms">Transformationsschlüsselwörter in einer Positionsliste</a></li>
  <li><a href="#examples">Beispiele für Anwendungen der Transformationsschlüsselwörter</a></li>
  <li><a href="#multiple">Mehrfachtransformationsschlüsselwörter</a></li>
</ul>

<h2 id="tranforms">Transformationsschlüsselwörter in einer Positionsliste</h2>

<p>
Bestimmte Sclüsselwörter in einer Positionsliste spezifizieren, daß die
Positionsliste eine Position filtert, wenn eine transformierte
Positionsliste die Position gefiltert hat. Beispielsweise spezifiziert
das Sclüsselwort <cql>position:fliphorizontal</cql>, daß die Positionsliste
dann eine Position filtert, wenn entweder die Ursprungspositionsliste diese
Position filtert, oder wenn eine an der horizontalen Halbierungslinie
gespiegelte Positionsliste diese Position filtert.
</p>

<p>
Eine Transformation einer Positionsliste geschieht, indem die Transformation
auf alle in der Positionsliste enthaltenen Figurenbezeichner angewendet
wird, und rekursiv eine Anwendungen dieser Transformation auch auf jede andere
enthaltene Positionsliste erfolgt. Ist die Transformation eine
Farbwechseltransformation, dann werden auch alle Schlüsselwörter
<cql>position:btm</cql> und <cql>position:wtm</cql> gegeneinander
ausgetauscht. Weiterhin werden alle Argumente des Schlüsselwortes
<cql>position:result</cql> enstprechend gedreht.
</p>

<p>
Als Beispiel betrachten wir die Positionsliste
</p>

<verb>
(position &R;c2 &B;h8 <cql>position:wtm</cql>)
</verb>

<p>
Diese filtert jede Position mit Weiß am Zug und einem weißen Turm auf c2, sowie
einen weißen Läufer auf h8. Das Resultat der Anwendung einer einstelligen
Linkswärtstransformation auf diese Positionsliste ist diese neue Positionsliste:
</p>

<verb>
(position &R;b2 &B;g8 <cql>position:wtm</cql>)
</verb>

<p>
die jede Position filtert mir einem weißen Turm auf b2, einem weißen Läufer
auf g8, sowie Weiß am Zug.
</p>

<p>
In gleicher Weise ist das Resultat der Anwendung einer horizontalen Spiegelung
auf diese Positionsliste die neue Liste:
</p>

<verb>
(position &R;b8 &B;g1 <cql>position:wtm</cql>)
</verb>

<p>
Das Resultat einer Farbwechseltransformation auf
</p>

<verb>
(position &R;b2 &B;g8 <cql>position:wtm</cql>)
</verb>

<p>
ist folglich
</p>

<verb>
(position &R;b8 &B;g1 <cql>position:btm</cql>)
</verb>

<p>
Zur Erinnerung: Verschiebungen wriken in spezieller Weise mit einigen
Randfeldern. Beispielsweise das Resultat der Anwendung einer
einstelligen Hochwärtstransformation auf folgende Positionsliste
</p>

<verb>
(position &R;[a1,a8,h1,a8])
</verb>

<p>
ergibt die Positionsliste:
</p>

<verb>
(position &R;[a1,a2,h1,h2])
</verb>

<p>
Eine Transformationsmenge ist eine beliebige Menge von Transformationen. Eine
Transformationsmenge angewendet auf eine Positionsliste ist die Menge aller
Positionslisten als Resultat der Anwendung aller Transformationen in
der Transformationsmenge auf die Positionsliste.
</p>

<p>
Jedes Tranformationsschlüsselwort ist mit einer Transformationsmenge assoziiert,
jede davon beinhaltet auch die identische Transformation.
</p>

<p>
Zu den Tranformationsschlüsselwörtern siehe:
<a href="CQL-Position-List.html#transform">Die Positionsliste:
Transformationsschlüsselwörter</a>.
</p>

<h2 id="examples">Beispiele für Anwendungen der Transformationsschlüsselwörter</h2>

<verb>
(position &R;c3 &q;g3)
</verb>

<p>
Diese Positionsliste filtert jede Position mit einem weißen Turn auf c3, und
einer schwarzen Dame auf g3. Wir können das Schlüsselwort :shifthorizontal 
hinzufügen:
</p>

<verb>
(position &R;c3 &q;g3 <keyword>:shifthorizontal</keyword>)
</verb>

<p>
Die Menge der transformierten Positionslisten ist nun:
</p>

<verb>
(position &R;c3 &q;g3)<br/>
(position &R;b3 &q;f3)<br/>
(position &R;a3 &q;e3)<br/>
(position &R;d3 &q;h3)
</verb>

<p>
Eine Position wird mit der neuen Liste gefiltert, wenn es auf der dritten
Reihe einen weißen Turm und eine schwarze Dame gibt, und der weiße Turm vier
Felder links von der schwarzen Dame steht.
</p>

<verb>
(position &R;c3 &q;g3 <keyword>:shiftvertical</keyword>)
</verb>

<p>
In gleicher Weise filtert diese Positionsliste jede Position, in der sich
ein weißer Turm auf der gleichen Reihe mit einer schwarzen Dame befindet,
und der Turm auf der c-Linie steht, und die Dame auf der g-Linie.
</p>

<verb>
(position &R;c3 &q;g3 <keyword>:shift</keyword>)
</verb>

<p>
Diese Positionsliste filtert jede Position mit einem weißen Turm und einer
schwarzen Dame auf der gleichen Reihe, so daß dieser Turm vier Felder links der
schwarzen Dame steht.
</p>

<verb>
(position &R;c3 &q;g3 <keyword>:fliphorizontal</keyword>)
</verb>

<p>
Diese Positionsliste filtert jede Position, in der entweder ein weißer Turm
auf c3 und eine schwarze Dame auf g3 steht, oder ein weißer Turm auf c6 und
eine schwarze Dame auf g6.
</p>

<verb>
(position &R;c3 &q;g3 <keyword>:flipdiagonal</keyword>)
</verb>

<p>
Diese Positionsliste filtert jede Position, in der entweder ein weißer Turm
auf c3 und eine schwarze Dame auf g3 steht, oder ein weißer Turm auf c3 und
eine schwarze Dame auf c7.
</p>

<verb>
(position &R;c3 &q;g3 <keyword>:flip</keyword>)
</verb>

<p>
Diese Positionsliste filtert jede Position, in der ein weißer Turm hinter
einem weißen Bauern auf der c-Linie steht.
</p>

<verb>
(position &P;c2 &R;c1 <keyword>:shiftvertical</keyword>)
</verb>

<p>
Aufgrund der Weise wie Randfelder behandelt werden, filtert dies Positionen,
in der beispielsweise ein weißer Turm auf c2 steht aund ein weißer Bauer auf
c7.
</p>

<p>
Um Positionen zu filtern, in denen ein weißer Turm hinter einem weißen Bauern
aud der gleichen Linie steht, verwenden wir:
</p>

<verb>
(position &P;c2 &R;c1 <keyword>:shift</keyword>)
</verb>

<h2 id="multiple">Mehrfachtransformationsschlüsselwörter</h2>

<p>
Wenn Merhfachtransformationsschlüsselwörter vorkommen, dann besteht die
assoziierte Transformationsmenge aus jeder Transformation, die als
Hintereinanderausführung von Transformationen aus der entsprechenden
Transformationsmenge ausgedrückt werden kann. Diese Fähigkeit wird meist
dann angewandt, wenn nach einer Figurenanordnung gesucht wird, die
irgendwo auf dem Schachbrett stehen kann, möglicherweise gedeht oder
gespiegelt; das Hinzufügen von <expr>:shift</expr> <expr>:flip</expr>
zur Positionsliste ermöglicht dies.
</p>

<p>
Beispiel: die Positionsliste
</p>

<verb>
(position &N;d4 &k;f3 <keyword>:shift</keyword> <keyword>:flip</keyword>)
</verb>

<p>
filtert jede Position, in der ein weißer Springer einen schwarzen König
angreift, während
</p>

<verb>
(position &N;d4 &k;f3 <keyword>:shift</keyword> <keyword>:flip</keyword> <keyword>:flipcolor</keyword>)
</verb>

<p>
jede Position filtert, in der ein Springer einen gegnerischen König angreift.
</p>

<p>
Beachte: Dieses Beispiel kann effizienter formuliert werden:
</p>

<verb>
(position <cql>position:attackcount</cql> &N; &k; 1 unlimited <keyword>:flipcolor</keyword>)
</verb>

END

<!-- vi:set ts=2 sw=2 et filetype=html: -->
