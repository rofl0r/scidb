<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated from tcl/help/de/CQL-Position-List.txt -->

<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='de'>
<head>
  <meta http-equiv="content-type"
           content="text/html; charset=utf-8" />
  <meta http-equiv="content-language"
           content="de" />
  <meta http-equiv="content-style-type"
           content="text/css" />

  <meta name="author"
     content="scidb.sourceforge.net" />
  <meta name="generator"
     content="scidb.sourceforge.net" />
  <meta name="description"
     content="Scidb Help Page" />

  <link rel="icon"
       href="http://scidb.sourceforge.net/favicon.ico"
       type="image/x-icon" />
  <link rel="shortcut icon"
       href="http://scidb.sourceforge.net/favicon.ico" />
  <link rel="stylesheet"
       type="text/css"
      media="screen"
       href="../styles/help.css" />

  <title>Scidb Hilfe: CQL - Die Positionsliste</title>
</head>

<body>

<div class="title">
  <h1 class="title">CQL - Die Positionsliste</h1>
</div>

<p>
Das Symbol <img src="../images/ft-scidb-tiny.png" alt="" />  im Titel einer
Schlüsselwortdefinition kennzeichnet, daß dieses Schlüsselwort eine
Erweiterung ist, also nicht zum CQL-Standard gehört.
</p>

<p>
Die Schlüsselwörter <a href="CQL-Position-List.html#position:castling"><span style='white-space:nowrap;'>:castling</span></a>, <a href="CQL-Position-List.html#position:endgame"><span style='white-space:nowrap;'>:endgame</span></a>,
<a href="CQL-Position-List.html#position:inside"><span style='white-space:nowrap;'>:inside</span></a>, and <a href="CQL-Position-List.html#position:reset"><span style='white-space:nowrap;'>:reset</span></a> sind von Chess
Assistant 9 entlehnt worden. Die Beschreibung dieser Schlüsselwörter entstammt
dem Dokument <a href="http://hornid.com/chess/docs/CQL-3GX.pdf">The CQL 3.GX Extension<span class="awesome">&nbsp;&#xf08e;</span></a>.
</p>

<ul style='list-style-type: none'><li>
  <table>
    <tr><td>&#x2022;</td><td><a href="#index">Index</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#logical">Schlüsselwörter für die Kontrolllogik</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#control">Schlüsselwörter für die Steuerung</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#simple">Einfache Schlüsselwörter</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#transform">Transformierende Schlüsselwörter</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#piece">Schlüsselwörte für die Figurenanalyse</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#move">Schlüsselwörter für die Zuganalyse</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#sequence">Schlüsselwörter für Sequenzen</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#game">Schlüsselwörter für die Partieinformationen</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#relation">Relationen zwischen den Positionen</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#matching">Schlüsselwörter zur Zählung</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#evaluation">Schlüsselwörter für die Stellungsbeurteilung</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#accumulator">Schlüsselwörter für Akkumulationen</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#tagging">Schlüsselwörter für das Markieren</a></td></tr>
  </table>
</li></ul>

<h2 id="index">Index</h2>

<ul style='list-style-type: none'><li>
  <table>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:accumulate">:accumulate</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:iscastling">:iscastling</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:promote">:promote</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:and">:and</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:losing">:losing</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:rating">:rating</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:attackcount">:attackcount</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:markall">:markall</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:ray">:ray</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:blackcannotwin">:blackcannotwin</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:matchcount">:matchcount</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:rayattack">:rayattack</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:blackelo">:blackelo</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:mate">:mate</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:raydiagonal">:raydiagonal</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:blackrating">:blackrating</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:matingmaterial">:matingmaterial</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:rayhorizontal">:rayhorizontal</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:btm">:btm</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:maxswapevaluation">:maxswapevaluation</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:rayorthogonal">:rayorthogonal</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:castling">:castling</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:moveevaluation">:moveevaluation</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:rayvertical">:rayvertical</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:check">:check</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:movefrom">:movefrom</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:relation">:relation</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:checkcount">:checkcount</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:movenumber">:movenumber</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:repetition">:repetition</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:contactcheck">:contactcheck</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:moveto">:moveto</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:reset">:reset</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:cut">:cut</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:noannotate">:noannotate</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:result">:result</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:doublecheck">:doublecheck</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:nocastling">:nocastling</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:sequence">:sequence</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:elo">:elo</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:nocheck">:nocheck</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:shift">:shift</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:endgame">:endgame</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:nocontactcheck">:nocontactcheck</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:shiftdiagonal">:shiftdiagonal</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:enpassant">:enpassant</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:nodoublecheck">:nodoublecheck</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:shifthorizontal">:shifthorizontal</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:evaluation">:evaluation</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:noendgame">:noendgame</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:shiftmaindiagonal">:shiftmaindiagonal</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:exchangeevaluation">:exchangeevaluation</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:noenpassant">:noenpassant</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:shiftoffdiagonal">:shiftoffdiagonal</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:exclude">:exclude</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:nolosing">:nolosing</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:shiftvertical">:shiftvertical</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:fen">:fen</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:nomate">:nomate</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:stalemate">:stalemate</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:fiftymoverule">:fiftymoverule</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:nomatingmaterial">:nomatingmaterial</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:sumrange">:sumrange</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:flip">:flip</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:nostalemate">:nostalemate</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:tagmatch">:tagmatch</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:flipcolor">:flipcolor</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:not">:not</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:terminal">:terminal</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:flipdihedral">:flipdihedral</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:or">:or</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:variant">:variant</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:flipdiagonal">:flipdiagonal</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:piececount">:piececount</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:variations">:variations</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:fliphorizontal">:fliphorizontal</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:piecedrop">:piecedrop</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:variationsonly">:variationsonly</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:flipvertical">:flipvertical</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:power">:power</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:whitecannotwin">:whitecannotwin</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:gameisover">:gameisover</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:powerdifference">:powerdifference</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:whiteelo">:whiteelo</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:gappedsequence">:gappedsequence</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:preceding">:preceding</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:whiterating">:whiterating</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:halfmoveclocklimit">:halfmoveclocklimit</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:pretransformmatchcount">:pretransformmatchcount</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:wtm">:wtm</a></td>
    </tr>
    <tr>
    	<td>      &#x2022;</td><td><a href="#position:inside">:inside</a></td>
    </tr>
  </table>
</li></ul>

<h2 id="logical">Schlüsselwörter für die Kontrolllogik</h2>

<ul style='list-style-type: none'><li>
  <table>
    <tr><td>&#x2022;</td><td><a href="#position:and">:and</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:not">:not</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:or">:or</a></td></tr>
  </table>
</li></ul>

<h3 id="position:and">:and&emsp;<span class='normal'>(und)</span></h3>

<p>
Erwartet eine Liste von Positionslisten, und filtert genau dann eine Position,
wenn jede von ihnen diese Position filtert.
</p>

<p>
Beispiel:
</p>

<div class='box'><pre><code><!--
-->(position 
  <a href="CQL-Position-List.html#position:wtm"><span style='white-space:nowrap;'>:wtm</span></a>
  <a href="CQL-Position-List.html#position:check"><span style='white-space:nowrap;'>:check</span></a>
  <span class='keyword'>:and</span> (
    (position <span class='piece'>&#x2654;</span>e2 <span class='piece'>&#x265a;</span>g2 <a href="CQL-Position-List.html#position:shift"><span style='white-space:nowrap;'>:shift</span></a> <a href="CQL-Position-List.html#position:flip"><span style='white-space:nowrap;'>:flip</span></a>)
    (position <span class='piece'>&#x2658;</span>e2)))<!--
--></code></pre></div>

<p>
Filtert Positionen in denen die Könige in Opposition stehen, ein Springer auf
e2 platziert ist, und der weiße König steht im Schach.
</p>

<h3 id="position:not">:not&emsp;<span class='normal'>(nicht)</span></h3>

<p>
Dieses Schlüsselwort kann in zwei Formen angewandt werden: entweder ist es in
einer Positionsliste enthalten, oder es hat eine Positionsliste als Parameter.
Im ersten Fall filtert dieses Schlüsselwort, wenn die Positionsliste ohne dieses
Schlüsselwort nicht filtern würde. Im zweiten Fall: das Resultat des
Arguments wird negiert. Die erste Form ist konform mit dem CQL-Standard des
Schlüsselwortes :not, die zweite Form ist eine Erweiterung.
</p>

<p>
Beispiele:
</p>

<div class='box'><pre><code><!--
-->(match
  (position
    ; <span class='comment'>wir suchen für beide Seiten</span>
    <a href="CQL-Position-List.html#position:flipcolor"><span style='white-space:nowrap;'>:flipcolor</span></a>
    <span class='comment'>; die Mattposition muß alle folgenden Kriterien erfüllen</span>
    <a href="CQL-Position-List.html#position:and"><span style='white-space:nowrap;'>:and</span></a> (
      <span class='comment'>; der König ist von Leerfeldern umgeben, wird einmal</span>
      <span class='comment'>; attackiert, und ist matt</span>
      (position
        <a href="CQL-Position-List.html#position:attackcount"><span style='white-space:nowrap;'>:attackcount</span></a> <span class='piece'>&#x265a;</span> . 8
        <a href="CQL-Position-List.html#position:attackcount"><span style='white-space:nowrap;'>:attackcount</span></a> A <span class='piece'>&#x265a;</span> 1
        <a href="CQL-Position-List.html#position:mate"><span style='white-space:nowrap;'>:mate</span></a>
        <a href="CQL-Position-List.html#position:btm"><span style='white-space:nowrap;'>:btm</span></a>)
      <span class='comment'>; überprüfe daß kein Nachbar des schwarzen Königs</span>
      <span class='comment'>; mehr als einmal attackiert wird</span>
      (position
        <span class='keyword'>:not</span>
        <a href="CQL-Position-List.html#position:attackcount"><span style='white-space:nowrap;'>:attackcount</span></a> <span class='piece'>&#x265a;</span> .e4 1
        <a href="CQL-Position-List.html#position:attackcount"><span style='white-space:nowrap;'>:attackcount</span></a> A .e4 2 100
        <a href="CQL-Position-List.html#position:shift"><span style='white-space:nowrap;'>:shift</span></a>))))<!--
--></code></pre></div>

<p>
Dies findet alle Mattpositionen, in denen der König von Leerfeldern umgeben ist.
</p>

<p>
Die folgende Positionsliste
</p>

<div class='verb'><code>
(position <span class='piece'>&#x2656;</span>a3 <span class='keyword'>:not</span>)
</code></div>

<p>
ist equivalent zu
</p>

<div class='verb'><code>
(position [a<span class='piece'>&#x2655;</span><span class='piece'>&#x2657;</span><span class='piece'>&#x2658;</span><span class='piece'>&#x2659;</span><span class='piece'>&#x2654;</span>.]a3)
</code></div>

<h3 id="position:or">:or&emsp;<span class='normal'>(oder)</span></h3>

<p>
Erwartet eine Liste von Positionslisten, und filter genau dann eine Position,
wenn mindestens eine von ihnen diese Position filtert.
</p>

<p>
Beispiel:
</p>

<div class='box'><pre><code><!--
-->(match
  (position
    <span class='keyword'>:or</span> (
      (position <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a>
        <span class='piece'>&#x2657;</span>[a1,a3,a5,a7,b2,b4,b6,b8,c1,c3,c5,c7,d2,d4,d6,d8,e1,
        e3,e5,e7,f2,f4,f6,f8,g1,g3,g5,g7,h2,h4,h6,h8] 2 9)
      (position <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a>
        <span class='piece'>&#x265d;</span>[a1,a3,a5,a7,b2,b4,b6,b8,c1,c3,c5,c7,d2,d4,d6,d8,e1,
        e3,e5,e7,f2,f4,f6,f8,g1,g3,g5,g7,h2,h4,h6,h8] 2 9)
      (position <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a>
        <span class='piece'>&#x265d;</span>[a2,a4,a6,a8,b1,b3,b5,b7,c2,c4,c6,c8,d1,d3,d5,d7,e2,
        e4,e6,e8,f1,f3,f5,f7,g2,g4,g6,g8,h1,h3,h5,h7] 2 9)
      (position <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a>
        <span class='piece'>&#x2657;</span>[a2,a4,a6,a8,b1,b3,b5,b7,c2,c4,c6,c8,d1,d3,d5,d7,e2,
        e4,e6,e8,f1,f3,f5,f7,g2,g4,g6,g8,h1,h3,h5,h7] 2 9))))<!--
--></code></pre></div>

<p>
Suche nach Partien, die Positionen mit entweder zwei weißfeldrigen weißen
Läufern, zwei schwarzfeldrigen weißen Läufern, zwei schwarzfeldrigen schwarzen
Läufern, oder aber zwei weißfeldrigen schwarzen Läufern haben.
</p>

<h2 id="control">Schlüsselwörter für die Steuerung</h2>

<p>
Mit Hilfe der steuernden Schlüsselwörter <a href="CQL-Position-List.html#position:cut"><span style='white-space:nowrap;'>:cut</span></a> und
<a href="CQL-Position-List.html#position:exclude"><span style='white-space:nowrap;'>:exclude</span></a> können unerwünschte Positionen oder sogar
Partien ausgeschlossen werden. Das Schlüsselwörter
<a href="CQL-Position-List.html#position:preceding"><span style='white-space:nowrap;'>:preceding</span></a> liefert den Vorgänger einer aufgefundenen
Position.
</p>

<p>
Tatsächlich erweitern diese Schlüsselwörter die Mächtigkeit von CQL nicht,
jedes von ihnen kann ersetzt werden, aber der Gebrauch dieser Schlüsselwörter
kann die Suchzeit beträchtlich verkürzen, und der Suchausdruck ist
möglicherweise klarer definiert.
</p>

<ul style='list-style-type: none'><li>
  <table>
    <tr><td>&#x2022;</td><td><a href="#position:cut">:cut</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:exclude">:exclude</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:preceding">:preceding</a></td></tr>
  </table>
</li></ul>

<h3 id="position:cut">:cut&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(beschneiden)</span></h3>

<p>
Dieses Schlüsselwort kann in zwei Formen angewandt werden: entweder ist es in
einer Positionsliste enthalten, oder es hat eine Positionsliste als Parameter.
In der ersten Form wird die Positionssuche in der aktuellen Partie abgebrochen
sobald die Bedingung der Positionsliste aufgefunden wird. In der zweiten Form
bricht die Suche in der aktuellen Partie ab sobald die Bedingung des
Arguments aufgefunden wird. Dieses Schlüsselwort ist immer erfolgreich,
mit anderen Worten: es beeinflußt nicht das Resultat der anderen Filter.
</p>

<p>
Der :cut-Filter hat niedrigere Priorität als alle anderen Filter. Das heißt,
daß eine Position gefiltert wird, wenn alle anderen Filter diese Position
akzeptieren, unabhängig vom Resultat des :cut-Filters. Soll der :cut-Filter
höchste Priorität haben, dann ist das Schlüsselwort
<a href="CQL-Position-List.html#position:preceding"><span style='white-space:nowrap;'>:preceding</span></a> anzuwenden. In diesem Fall bricht die Erfüllung
der :cut-Bedingung mit einem negativen Resultat ab, unanhängig vom Resultat
aller anderen Bedingungen. Siehe dazu nachfolgende Beispiele:
</p>

<div class='verb'><code>
(match (position &lt;A&gt; <span class='keyword'>:cut</span> (position &lt;B&gt;))
</code></div>

<p>
Wir nehmen an das &lt;A&gt; und &lt;B&gt; von einer Position erfüllt werden,
und beide Bedingungen zum erstem Mal. In diesem Fall ist die Suche in dieser
Partie erfolgreich.
</p>

<div class='verb'><code>
(match (position &lt;A&gt; <span class='keyword'>:cut</span> (position <a href="CQL-Position-List.html#position:preceding"><span style='white-space:nowrap;'>:preceding</span></a> &lt;B&gt;)))
</code></div>

<p>
Wir nehmen an das &lt;A&gt; und &lt;B&gt; von einer Position erfüllt werden,
und beide Bedingungen zum erstem Mal. In diesem Fall ist die Suche in dieser
Partie negativ.
</p>

<p>
Beispiele:
</p>

<div class='box'><pre><code><!--
-->(match
  (position
    <a href="CQL-Position-List.html#position:mate"><span style='white-space:nowrap;'>:mate</span></a>
    <span class='keyword'>:cut</span> (position <a href="CQL-Position-List.html#position:check"><span style='white-space:nowrap;'>:check</span></a>)))<!--
--></code></pre></div>

<p>
Suche nach Partien die mit einem Matt enden, und keine der beiden Seiten hat
jemals zuvor Schach geboten. Tatsächlich ist das Schlüsselwort :cut für
diese Suchkriterien nicht erforderlich, wie folgende Umformung zeigt:
</p>

<div class='box'><pre><code><!--
-->(match
  (position <a href="CQL-Position-List.html#position:mate"><span style='white-space:nowrap;'>:mate</span></a>)
  (position <a href="CQL-Position-List.html#position:check"><span style='white-space:nowrap;'>:check</span></a> <a href="CQL-Position-List.html#position:matchcount"><span style='white-space:nowrap;'>:matchcount</span></a> 1))<!--
--></code></pre></div>

<p>
Aber diese Version durchsucht die gesamte Partie, und die vorhergehende Version
mit :cut schlägt bereits fehl sobald das erste Schachgebot erfolgt. In
komplexen Fällen kann der Gebrauch des Schlüsselwortes :cut viel effizienter
sein als der Gebrauch von :matchcount.
</p>

<h3 id="position:exclude">:exclude&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(ausschliessen)</span></h3>

<p>
Dieses Schlüsselwort kann in zwei Formen angewandt werden: entweder ist es in
einer Positionsliste enthalten, oder es hat eine Positionsliste als Parameter.
In der ersten Form wird die Partie ausgeschlossen wenn eine Position von
der Positionsliste gefiltert wird. In der zweiten Form wird eine Partie
ausgeschlossen, wenn das Resultat des Arguments positiv ist. Diese
Schlüsselwort beeinflußt nicht das Resultat der anderen Filter (siehe
dazu das Besipiel).
</p>

<p>
Dieses Schlüsselwort schließt selbst dann Partien aus, wenn eine Position
gefiltert wurde bevor die :exclude-Bedingungen erfüllt wurden. Kurz gesagt:
:exclude schließt unter gewissen Bedingungen Partien vollständig aus der Suche
aus.
</p>

<p>
Beispiel:
</p>

<div class='box'><pre><code><!--
-->(match
  (position
    &lt;A&gt;
    <span class='keyword'>:exclude</span> (position &lt;B&gt;)))<!--
--></code></pre></div>

<p>
Suche nach Partien die eine Position enthalten, die Bedingung
<span style='white-space:nowrap;'><code>&lt;A&gt;</code></span> erfüllen, aber nicht wenn es in dieser Partie
eine Position gibt, die die Bedingung <span style='white-space:nowrap;'><code>&lt;B&gt;</code></span> erfüllt.
Dieses Suchkrierium kann auch ohne den Gebrauch des Schlüsselwortes
:exclude formuliert werden:
</p>

<div class='box'><pre><code><!--
-->(match
  (position
    <a href="CQL-Position-List.html#position:and"><span style='white-space:nowrap;'>:and</span></a> (
      (position &lt;A&gt;)
      (position &lt;B&gt; <a href="CQL-Position-List.html#position:matchcount"><span style='white-space:nowrap;'>:matchcount</span></a> 0))))<!--
--></code></pre></div>

<p>
Aber der Gebrauch von :exclude ist einfacher und klarer.
</p>

<h3 id="position:preceding">:preceding&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(vorhergehende)</span></h3>

<p>
Dieses Schlüsselwort liefert die vorhergehende Position des Filters, sofern
ein Ergebnis vorliegt. Ist die Startposition gefiltert worden, dann wird
diese Position übergangen, und die Suche läuft weiter. Das Schlüsselwort
kann nur auf oberster Ebene verwendet werden.
</p>

<p>
Diese Schlüsselwort hat eine spezielle Bedeutung wenn es mit dem
Schlüsselwort <a href="CQL-Position-List.html#position:cut"><span style='white-space:nowrap;'>:cut</span></a> kombiniert wird.
</p>

<p>
Beispiele:
</p>

<div class='verb'><code>
position <a href="CQL-Position-List.html#position:check"><span style='white-space:nowrap;'>:check</span></a> <span class='keyword'>:preceding</span>
</code></div>

<p>
Das Resultat dieser Suche ist die Vorgängerposition der ersten gefundenen
Position, in der einer der Seiten Schach bietet. Dies kann auch ohne dieses
Schlüsselwort formuliert werden:
</p>

<div class='verb'><code>
position <a href="CQL-Position-List.html#position:sequence"><span style='white-space:nowrap;'>:sequence</span></a>
((position <a href="CQL-Position-List.html#position:nocheck"><span style='white-space:nowrap;'>:nocheck</span></a>) (position <a href="CQL-Position-List.html#position:check"><span style='white-space:nowrap;'>:check</span></a>))
</code></div>

<p>
Aber der Gebrauch von :preceding ist einfacher, und die Suche ist effizienter.
</p>

<h2 id="simple">Einfache Schlüsselwörter</h2>

<ul style='list-style-type: none'><li>
  <table>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:blackcannotwin">:blackcannotwin</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:matingmaterial">:matingmaterial</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:btm">:btm</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:noannotate">:noannotate</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:castling">:castling</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:nocheck">:nocheck</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:check">:check</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:nocontactcheck">:nocontactcheck</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:checkcount">:checkcount</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:nodoublecheck">:nodoublecheck</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:contactcheck">:contactcheck</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:noendgame">:noendgame</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:doublecheck">:doublecheck</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:nomate">:nomate</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:endgame">:endgame</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:nomatingmaterial">:nomatingmaterial</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:fen">:fen</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:nostalemate">:nostalemate</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:fiftymoverule">:fiftymoverule</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:repetition">:repetition</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:gameisover">:gameisover</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:stalemate">:stalemate</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:halfmoveclocklimit">:halfmoveclocklimit</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:terminal">:terminal</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:initial">:initial</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:variations">:variations</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:losing">:losing</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:variationsonly">:variationsonly</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:markall">:markall</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:whitecannotwin">:whitecannotwin</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:mate">:mate</a></td>
    	<td>&emsp;&#x2022;</td><td><a href="#position:wtm">:wtm</a></td>
    </tr>
  </table>
</li></ul>

<h3 id="position:blackcannotwin">:blackcannotwin&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Schwarz kann nicht gewinnen)</span></h3>

<p>
Filtere nur dann wenn der schwarze Spieler keine Gewinnmöglichkeit mehr hat.
</p>

<p>
Normalerweise ist dies equivalent zu folgender Abfrage:
</p>

<div class='box'><pre><code><!--
--><a href="CQL-Position-List.html#position:or"><span style='white-space:nowrap;'>:or</span></a> (
  <span class='comment'>; nur schwarzer König</span>
  (<a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> a 1)
  <span class='comment'>; nur schwarzer König und schwarze Leichtfigur</span>
  (<a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> a 2 <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> i 1))<!--
--></code></pre></div>

<p>
In der Schachform Dreimal-Schach filtert die Suche
mit :blackcannotwin nur dann, wenn Schwarz nur noch den König besitzt,
und in allen anderen Schachformen hat dieses Schlüsselwort keine
Bedeutung und ist immer erfolglos.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:whitecannotwin"><span style='white-space:nowrap;'>:whitecannotwin</span></a>
</p>

<h3 id="position:btm">:btm&emsp;<span class='normal'>(Schwarz am Zug)</span></h3>

<p>
Filtere nur wenn Schwarz am Zug ist.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:wtm"><span style='white-space:nowrap;'>:wtm</span></a>.
</p>

<h3 id="position:check">:check&emsp;<span class='normal'>(Schachgebot)</span></h3>

<p>
Eine Seite befindet sich im Schach.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:nocheck"><span style='white-space:nowrap;'>:nocheck</span></a>, <a href="CQL-Position-List.html#position:doublecheck"><span style='white-space:nowrap;'>:doublecheck</span></a>,
<a href="CQL-Position-List.html#position:nodoublecheck"><span style='white-space:nowrap;'>:nodoublecheck</span></a>, <a href="CQL-Position-List.html#position:contactcheck"><span style='white-space:nowrap;'>:contactcheck</span></a>,
<a href="CQL-Position-List.html#position:nocontactcheck"><span style='white-space:nowrap;'>:nocontactcheck</span></a>.
</p>

<h3 id="position:checkcount">:checkcount&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Schachgebotszähler)</span></h3>

<p>
Ist der Parameter eine einzelner Wert (zwischen 0 und 3 ist erlaubt),
dann werden alle Position gefiltert in denen der letzte Zug der anderen
Seite zum n-ten mal Schach bot.
</p>

<p>
Hat der Parameter die Form <span style='white-space:nowrap;'><code>+&lt;n&#x2081;&gt;+&lt;n&#x2082;&gt;</code></span>,
wobei <span style='white-space:nowrap;'><code>&lt;n&#x2093;&gt;</code></span> ein Wert zwischen 0 und 3 ist, so wird
die erste Position gefiltert, in der Weiß dem Schwarzen n&#x2081; Schachgebote
gab, und Schwarz dem Weißen n&#x2082; Schachgebote.
</p>

<p><img src='../images/note.png' alt='note' /> 
Diese Abfrage ist nur sinnvoll in der Schachform Dreimal-Schach,
in allen anderen Schachformen schlägt diese Abfrage immer fehl (ausgenommen
alle Parameterwerte sind Null).
</p>

<p>
Beispiele:
</p>

<div class='verb'><code>
(position <span class='keyword'>:checkcount</span> 2)
</code></div>

<p>
Filtere sobald eine der Seiten dem anderen sein zweites Schach bot.
</p>

<div class='verb'><code>
(position <span class='keyword'>:checkcount</span> +0+3)
</code></div>

<p>
Filtere wenn Schwarz dem weißen König zum dritten Mal Schach bot. Dies kann nur
eine Endstellung sein.
</p>

<div class='verb'><code>
(position <a href="CQL-Position-List.html#position:not"><span style='white-space:nowrap;'>:not</span></a> <span class='keyword'>:checkcount</span> +0+0)
</code></div>

<p>
Dies isr tatsächlich eine sinnvolle Abfrage. Wir nehmen an, daß eine
der Partien mit folgender Position beginnt (beschrieben mit einer
<a href="FEN.html">FEN</a>):
</p>

<ul style='list-style-type: none'><li><code>
rnb1k1nr/pppp1ppp/8/4p3/3PP2q/2N5/PP3PPP/R1BQKBNR w KQkq - 1 5 +0+2
</code></li></ul>

<p>
Diese Partie würde gefiltert werden (das Schlüsselwort :not ist zu beachten),
denn Schwarz hat dem weißen König bereits zweimal Schach geboten. Mit anderen
Worten: diese Abfrage sucht nach Partien die mit einer fortgeschrittenen
Stellung beginnen, wobei eine Seite der anderen bereits ein Schachgebot gab.
</p>

<h3 id="position:castling">:castling&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Rochade)</span></h3>

<p>
Dieses Schlüsselwort spezifiziert die Rochademöglichkeiten beider Seiten.
Es erwartet als Argument einen Figurenartbezeichner, wobei die Figurenarten
folgende Bedeutung haben:
</p>

<ul style='list-style-type: none'><li>
  <table>
    <tr>
      <td class="l"><span style='white-space:nowrap;'><code><span class='piece'>&#x2654;</span></code></span></td>
      <td class="r">Weiß besitzt das Recht zur kurzen Rochade</td>
    </tr>
    <tr>
      <td class="l"><span style='white-space:nowrap;'><code><span class='piece'>&#x2655;</span></code></span></td>
      <td class="r">Weiß besitzt das Recht zur langen Rochade</td>
    </tr>
    <tr>
      <td class="l"><span style='white-space:nowrap;'><code><span class='piece'>&#x265a;</span></code></span></td>
      <td class="r">Schwarz besitzt das Recht zur kurzen Rochade</td>
    </tr>
    <tr>
      <td class="l"><span style='white-space:nowrap;'><code><span class='piece'>&#x265b;</span></code></span></td>
      <td class="r">Schwarz besitzt das Recht zur langen Rochade</td>
    </tr>
  </table>
</li></ul>

<p>
Beispiele:
</p>

<div class='verb'><code>
(position <span class='keyword'>:castling</span> <span class='piece'>&#x2654;</span>)
</code></div>

<p>
Weiß hast das Recht zu kurzen Rochade.
</p>

<div class='verb'><code>
(position <span class='keyword'>:castling</span> [<span class='piece'>&#x2654;</span><span class='piece'>&#x2655;</span>])
</code></div>

<p>
Weiß has das Recht entweder für die kurze oder für die lange Rochade
(aber nicht für beide).
</p>

<div class='verb'><code>
(position <span class='keyword'>:castling</span> <span class='piece'>&#x2654;</span> <span class='keyword'>:castling</span> <span class='piece'>&#x2655;</span>)
</code></div>

<p>
Weiß hat das Recht für kurze und lange Rochade.
</p>

<h3 id="position:contactcheck">:contactcheck&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Kontaktschachgebot)</span></h3>

<p>
Eine Seite befindet sich im Schach, und es ist ein Kontaktschachgebot
(kein Zwischensetzen einer Figur möglich, auch nicht theoretisch).
</p>

<p>
Dies ist equivalent zu:
</p>

<div class='box'><pre><code><!--
-->(position
  <a href="CQL-Position-List.html#position:check"><span style='white-space:nowrap;'>:check</span></a> <span class='comment'>; um Schlagschachpartien auszufiltern</span>
  <a href="CQL-Position-List.html#position:or"><span style='white-space:nowrap;'>:or</span></a> (
    (position <a href="CQL-Position-List.html#position:doublecheck"><span style='white-space:nowrap;'>:doublecheck</span></a>)
    (position <a href="CQL-Position-List.html#position:attackcount"><span style='white-space:nowrap;'>:attackcount</span></a> [<span class='piece'>&#x2658;</span><span class='piece'>&#x2659;</span>] <span class='piece'>&#x265a;</span> 1 <a href="CQL-Position-List.html#position:flipcolor"><span style='white-space:nowrap;'>:flipcolor</span></a>)
    (position [<span class='piece'>&#x2655;</span><span class='piece'>&#x2656;</span>]d4 <span class='piece'>&#x265a;</span>e4 <a href="CQL-Position-List.html#position:flipcolor"><span style='white-space:nowrap;'>:flipcolor</span></a> <a href="CQL-Position-List.html#position:flip"><span style='white-space:nowrap;'>:flip</span></a>)
    (position [<span class='piece'>&#x2655;</span><span class='piece'>&#x2657;</span>]d4 <span class='piece'>&#x265a;</span>e5 <a href="CQL-Position-List.html#position:flipcolor"><span style='white-space:nowrap;'>:flipcolor</span></a> <a href="CQL-Position-List.html#position:flip"><span style='white-space:nowrap;'>:flip</span></a>)))<!--
--></code></pre></div>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:check"><span style='white-space:nowrap;'>:check</span></a>, <a href="CQL-Position-List.html#position:nocheck"><span style='white-space:nowrap;'>:nocheck</span></a>,
<a href="CQL-Position-List.html#position:doublecheck"><span style='white-space:nowrap;'>:doublecheck</span></a>, <a href="CQL-Position-List.html#position:nodoublecheck"><span style='white-space:nowrap;'>:nodoublecheck</span></a>,
<a href="CQL-Position-List.html#position:nocontactcheck"><span style='white-space:nowrap;'>:nocontactcheck</span></a>.
</p>

<h3 id="position:doublecheck">:doublecheck&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Doppelschachgebot)</span></h3>

<p>
Eine Seite befindet sich im Schach, und es ist ein Doppelschachgebot.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:check"><span style='white-space:nowrap;'>:check</span></a>, <a href="CQL-Position-List.html#position:nocheck"><span style='white-space:nowrap;'>:nocheck</span></a>,
<a href="CQL-Position-List.html#position:nodoublecheck"><span style='white-space:nowrap;'>:nodoublecheck</span></a>, <a href="CQL-Position-List.html#position:contactcheck"><span style='white-space:nowrap;'>:contactcheck</span></a>,
<a href="CQL-Position-List.html#position:nocontactcheck"><span style='white-space:nowrap;'>:nocontactcheck</span></a>.
</p>

<h3 id="position:endgame">:endgame&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Endspiel)</span></h3>

<p>
Die Position ist eine Endspielposition. Dieses Schlüsselwort ist equivalent
zur folgenden Abfrage:
</p>

<div class='box'><pre><code><!--
-->  (position
    <a href="CQL-Position-List.html#position:or"><span style='white-space:nowrap;'>:or</span></a> (
      (position
      <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> [<span class='piece'>&#x2655;</span><span class='piece'>&#x265b;</span>] 0
      <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> [<span class='piece'>&#x2656;</span><span class='piece'>&#x2657;</span><span class='piece'>&#x2658;</span>] 0 3
      <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> [<span class='piece'>&#x265c;</span><span class='piece'>&#x265d;</span><span class='piece'>&#x265e;</span>] 0 3)
    (position
      <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> <span class='piece'>&#x2655;</span> 1
      <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> <span class='piece'>&#x265b;</span> 1
      <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> [<span class='piece'>&#x2656;</span><span class='piece'>&#x265c;</span>] 0
      <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> I 0 1
      <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> i 0 1)
    (position
      <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> <span class='piece'>&#x2655;</span> 1
      <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> <span class='piece'>&#x2656;</span> 0
      <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> I 0 1
      <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> <span class='piece'>&#x265b;</span> 0
      <a href="CQL-Position-List.html#position:power"><span style='white-space:nowrap;'>:power</span></a> [<span class='piece'>&#x265c;</span><span class='piece'>&#x265d;</span><span class='piece'>&#x265e;</span>] 0 16
      <a href="CQL-Position-List.html#position:flipcolor"><span style='white-space:nowrap;'>:flipcolor</span></a>)))<!--
--></code></pre></div>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:noendgame"><span style='white-space:nowrap;'>:noendgame</span></a>.
</p>

<h3 id="position:fen">:fen&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> </h3>

<p>
Die Position ist identisch zur beschriebenen Position im Argument. Dieses
Argument muß eine gültige <a href="FEN.html">FEN</a> sein.
</p>

<h3 id="position:fiftymoverule">:fiftymoverule&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Fünfzig-Züge-Regel)</span></h3>

<p>
Die erste Position in der Partie, in der in den letzten 50 aufeinanderfolgenden
Zügen kein Stein geschlagen und auch kein Bauer gezogen wurde.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:halfmoveclocklimit"><span style='white-space:nowrap;'>:halfmoveclocklimit</span></a>.
</p>

<h3 id="position:gameisover">:gameisover&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Partie ist beendet)</span></h3>

<p>
Dies ist eine Kurzschreibweise für:
</p>

<div class='box'><pre><code><!--
-->  <a href="CQL-Position-List.html#position:or"><span style='white-space:nowrap;'>:or</span></a> (
    (position <a href="CQL-Position-List.html#position:mate"><span style='white-space:nowrap;'>:mate</span></a>)
    (position <a href="CQL-Position-List.html#position:stalemate"><span style='white-space:nowrap;'>:stalemate</span></a>)
    (position <a href="CQL-Position-List.html#position:losing"><span style='white-space:nowrap;'>:losing</span></a>)
    (position <a href="CQL-Position-List.html#position:checkcount"><span style='white-space:nowrap;'>:checkcount 3</span></a>)
    (position <a href="CQL-Position-List.html#position:nomatingmaterial"><span style='white-space:nowrap;'>:nomatingmaterial</span></a>))<!--
--></code></pre></div>

<h3 id="position:initial">:initial&emsp;<span class='normal'>(Startposition)</span></h3>

<p>
Dies ist die erste Position in der Partie (vor dem ersten Zug).
</p>

<h3 id="position:halfmoveclocklimit">:halfmoveclocklimit&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Halbzugzähler)</span></h3>

<p>
Dieses Schlüsselwort filtert Positionen, in denen der Halbzugzähler kleiner
oder gleich dem gegebenen Limit ist.
</p>

<p>
Halbzugzähler: Das ist die Anzahl der Halbzüge seit dem letzten Zug, in dem
ein Bauer zog oder eine Figur geschlagen wurde. Dieser Zähler entscheidet
auch, ob eine Seite ein Remis reklamieren kann aufgrund der 50-Züge-Regel
(&#x21d2; <a href="CQL-Position-List.html#position:fiftymoverule"><span style='white-space:nowrap;'>:fiftymoverule</span></a>).
</p>

<p>
Beispiel:
</p>

<div class='verb'><code>
<span class='keyword'>:halfmoveclocklimit</span> 30
</code></div>

<p>
Schließe alle Positionen aus, in denen in den letzten 30 Halbzügen (15 Züge
auf jeder Seite) kein Bauernzug erfolgte und auch kein Stein geschlagen
wurde.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:fiftymoverule"><span style='white-space:nowrap;'>:fiftymoverule</span></a>.
</p>

<h3 id="position:losing">:losing&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Verlust)</span></h3>

<p>
Filtere alle Endstellungen, in denen eine der Seiten alle Figuren verlor.
Dies ist nur in Schlagschachpartien möglich.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:nolosing"><span style='white-space:nowrap;'>:nolosing</span></a>.
</p>

<h3 id="position:markall">:markall&emsp;<span class='normal'>(Alles markieren)</span></h3>

<p>
Dieses Schlüsselwort wird unterstützt um kompatibel mit dem CQL-Standard
zu sein, es hat jedoch keinerlei Bedeutung in Scidb.
</p>

<h3 id="position:mate">:mate&emsp;<span class='normal'>(Schachmatt)</span></h3>

<p>
Filtere nur dann, wenn es eine Mattstellung ist.
</p>

<div class='annotation'><img src='../images/annotation.png' style='float:left; margin:0 1em 0 0' alt='annotation' />
Wenn nach Mattstellungen gesucht wird, dann sollte stets auch dieses
Schlüsselwort mitverwendet werden auch wenn es aufgrund anderer
Bedingungen überflüssig erscheint, denn es beschleunigt die Suche (nur
Endstellungen werden geprüft).  </div>

<p>
Beispiel:
</p>

<div class='verb'><code>
(position <span class='keyword'>:mate</span> <a href="CQL-Position-List.html#position:movenumber"><span style='white-space:nowrap;'>:movenumber</span></a> 1 20)
</code></div>

<p>
Filtere nur dann wenn eine Seite in den ersten 20 Zügen mattgesetzt wurde.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:nomate"><span style='white-space:nowrap;'>:nomate</span></a>.
</p>

<h3 id="position:matingmaterial">:matingmaterial&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Mattmaterial)</span></h3>

<p>
Filtere Positionen, in denen einer der Spieler noch über Mattmaterial verfügt
(&#x21d2; <a href="CQL-Position-List.html#position:nomatingmaterial"><span style='white-space:nowrap;'>:nomatingmaterial</span></a>).
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:nomatingmaterial"><span style='white-space:nowrap;'>:nomatingmaterial</span></a>.
</p>

<h3 id="position:noannotate">:noannotate&emsp;<span class='normal'>(nicht kommentieren)</span></h3>

<p>
Dieses Schlüsselwort wird unterstützt um kompatibel mit dem CQL-Standard
zu sein, es hat jedoch keinerlei Bedeutung in Scidb.
</p>

<h3 id="position:nocheck">:nocheck&emsp;<span class='normal'>(kein Schachgebot)</span></h3>

<p>
Keine Seite befindet sich im Schach.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:check"><span style='white-space:nowrap;'>:check</span></a>, <a href="CQL-Position-List.html#position:doublecheck"><span style='white-space:nowrap;'>:doublecheck</span></a>,
<a href="CQL-Position-List.html#position:nodoublecheck"><span style='white-space:nowrap;'>:nodoublecheck</span></a>, <a href="CQL-Position-List.html#position:contactcheck"><span style='white-space:nowrap;'>:contactcheck</span></a>,
<a href="CQL-Position-List.html#position:nocontactcheck"><span style='white-space:nowrap;'>:nocontactcheck</span></a>.
</p>

<h3 id="position:nocontactcheck">:nocontactcheck&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(kein Kontaktschachgebot)</span></h3>

<p>
Keine Seite befindet sich im Schach, oder aber es ist kein
Kontaktschachgebot (&#x21d2; <a href="CQL-Position-List.html#position:contactcheck"><span style='white-space:nowrap;'>:contactcheck</span></a>).
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:check"><span style='white-space:nowrap;'>:check</span></a>, <a href="CQL-Position-List.html#position:nocheck"><span style='white-space:nowrap;'>:nocheck</span></a>,
<a href="CQL-Position-List.html#position:doublecheck"><span style='white-space:nowrap;'>:doublecheck</span></a>, <a href="CQL-Position-List.html#position:nodoublecheck"><span style='white-space:nowrap;'>:nodoublecheck</span></a>,
<a href="CQL-Position-List.html#position:contactcheck"><span style='white-space:nowrap;'>:contactcheck</span></a>.
</p>

<h3 id="position:nodoublecheck">:nodoublecheck&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(kein Doppelschachgebot)</span></h3>

<p>
Keine der Seiten befindet sich im Schach, oder aber es ist kein
Doppelschachgebot.
</p>

<h3 id="position:noendgame">:noendgame&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(kein Endspiel)</span></h3>

<p>
Diese Position ist keine Endspielposition (&#x21d2;
<a href="CQL-Position-List.html#position:endgame"><span style='white-space:nowrap;'>:endgame</span></a>).
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:endgame"><span style='white-space:nowrap;'>:endgame</span></a>.
</p>

<h3 id="position:nomate">:nomate&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(kein Schachmatt)</span></h3>

<p>
Schließe alle Mattstellungen aus.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:mate"><span style='white-space:nowrap;'>:mate</span></a>.
</p>

<h3 id="position:nomatingmaterial">:nomatingmaterial&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(kein Mattmaterial)</span></h3>

<p>
Filtere alle Position, in denen keiner der Spieler noch über Mattmaterial
verfügt.
</p>

<p>
Normalerweise ist dies equivalent zur folgenden Abfrage:
</p>

<div class='box'><pre><code><!--
--><a href="CQL-Position-List.html#position:or"><span style='white-space:nowrap;'>:or</span></a> (
  <span class='comment'>; König gegen König</span>
  (<a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> U 2)
  <span class='comment'>; König und Leichtfigur gegen König</span>
  (<a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> U 3 <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> [Ii] 1)
  <span class='comment'>; king and Läufer gegen König und Läufer,</span>
  <span class='comment'>; beide Läufer entweder weiß- oder schwarzfeldrig</span>
  (<a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> U 4 <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> [<span class='piece'>&#x2657;</span><span class='piece'>&#x265d;</span>][a1,a3,a5,a7,b2,b4,b6,b8,c1,c3,c5,
     c7,d2,d4,d6,d8,e1,e3,e5,e7,f2,f4,f6,f8,g1,g3,g5,g7,h2,h4,h6,h8] 2)
  (<a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> U 4 <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> [<span class='piece'>&#x2657;</span><span class='piece'>&#x265d;</span>][a2,a4,a6,a8,b1,b3,b5,b7,c2,c4,c6,
     c8,d1,d3,d5,d7,e2,e4,e6,e8,f1,f3,f5,f7,g2,g4,g6,g8,h1,h3,h5,h7] 2))<!--
--></code></pre></div>

<p>
In der Schachform Dreimal-Schach filtert die Suche
mit :nomatingmaterial nur dann, wenn nur noch Könige auf dem Schachbrett
sind, und in allen anderen Schachformen hat dieses Schlüsselwort keine
Bedeutung und ist immer erfolglos.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:matingmaterial"><span style='white-space:nowrap;'>:matingmaterial</span></a>.
</p>

<h3 id="position:nostalemate">:nostalemate&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(kein Patt)</span></h3>

<p>
Filtere nur Positionen in denen niemand patt ist.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:stalemate"><span style='white-space:nowrap;'>:stalemate</span></a>,
</p>

<h3 id="position:repetition">:repetition&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Stellungswiederholung)</span></h3>

<p>
Filtere die erste Position in der Hauptvariante, die zum dritten Mal in der
Partie wiederholt wurden, mit der gleichen Seite am Zug, und den gleichen
Rochade- und En-Passant-Rechten. Diese Wiederholung muß nicht aufeinanderfolgen.
Dies stimmt mit der FIDE-Regelung der
<a href="http://de.wikipedia.org/wiki/Stellungswiederholung">
Stellungswiederholung<span class="awesome">&nbsp;&#xf08e;</span></a> überein.
</p>

<h3 id="position:stalemate">:stalemate&emsp;<span class='normal'>(Patt)</span></h3>

<p>
Filtert alle Pattstellungen.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:nostalemate"><span style='white-space:nowrap;'>:nostalemate</span></a>,
</p>

<h3 id="position:terminal">:terminal&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Endstellung)</span></h3>

<p>
Diese ist die letzte Position in der Partie.
</p>

<h3 id="position:variations">:variations&emsp;<span class='normal'>(Varianten)</span></h3>

<p>
Ziehe die Untervarianten in die Suche mit ein. Ohne diese Angabe werden
die Untervarianten bei der Suche ausgelassen.
</p>

<h3 id="position:variationsonly">:variationsonly&emsp;<span class='normal'>(nur die Varianten)</span></h3>

<p>
Suche nur in den Untervarianten, nicht in der Hauptvariante.
</p>

<h3 id="position:whitecannotwin">:whitecannotwin&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Weiß kann nicht gewinnen)</span></h3>

<p>
Filtert nur dann wenn Weiß keine Gewinnmöglichkeit mehr hat.
</p>

<p>
Normalerweise ist dies equivalent zur folgenden Abfrage:
</p>

<div class='box'><pre><code><!--
--><a href="CQL-Position-List.html#position:or"><span style='white-space:nowrap;'>:or</span></a> (
  <span class='comment'>; nur weißer König</span>
  (<a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> A 1)
  <span class='comment'>; nur weißer König und weiße Leichtfigur</span>
  (<a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> A 2 <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> I 1))<!--
--></code></pre></div>

<p>
In der Schachform Dreimal-Schach filtert die Suche
mit :whitecannotwin nur dann, wenn Weiß nur noch den König besitzt,
und in allen anderen Schachformen hat dieses Schlüsselwort keine
Bedeutung und ist immer erfolglos.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:blackcannotwin"><span style='white-space:nowrap;'>:blackcannotwin</span></a>
</p>

<h3 id="position:wtm">:wtm&emsp;<span class='normal'>(Weiß am Zug)</span></h3>

<p>
Filtert nur wenn Weiß am Zug ist.
</p>

<h2 id="transform">Transformierende Schlüsselwörter</h2>

<ul style='list-style-type: none'><li>
  <table>
    <tr><td>&#x2022;</td><td><a href="#position:flip">:flip</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:flipcolor">:flipcolor</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:flipdiagonal">:flipdiagonal</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:flipdihedral">:flipdihedral</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:fliphorizontal">:fliphorizontal</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:flipvertical">:flipvertical</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:inside">:inside</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:shift">:shift</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:shiftdiagonal">:shiftdiagonal</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:shifthorizontal">:shifthorizontal</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:shiftmaindiagonal">:shiftmaindiagonal</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:shiftoffdiagonal">:shiftoffdiagonal</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:shiftvertical">:shiftvertical</a></td></tr>
  </table>
</li></ul>

<h3 id="position:flip">:flip&emsp;<span class='normal'>(Spiegelung)</span></h3>

<p>
Dies ist identisch zu <a href="CQL-Position-List.html#position:flipdihedral"><span style='white-space:nowrap;'>:flipdihedral</span></a> (&#x21d2;
<a href="CQL-Transformations.html">Transformationen</a>).
</p>

<h3 id="position:flipcolor">:flipcolor&emsp;<span class='normal'>(Farbwechsel)</span></h3>

<p>
Die Farbwecheseltransformation (&#x21d2;
<a href="CQL-Transformations.html">Transformationen</a>).
</p>

<h3 id="position:flipdiagonal">:flipdiagonal&emsp;<span class='normal'>(Diagonale Spiegelung)</span></h3>

<p>
Die diagonale und gegendiagonale Spiegelungstransformation (&#x21d2;
<a href="CQL-Transformations.html">Transformationen</a>).
</p>

<h3 id="position:flipdihedral">:flipdihedral&emsp;<span class='normal'>(Diedrische Transformation)</span></h3>

<p>
Alle diahedralen Transformationen (&#x21d2;
<a href="CQL-Transformations.html">Transformationen</a>).
</p>

<h3 id="position:fliphorizontal">:fliphorizontal&emsp;<span class='normal'>(Horizontale Spiegelung)</span></h3>

<p>
Die horizontale Spiegelungstransformation (&#x21d2;
<a href="CQL-Transformations.html">Transformationen</a>).
</p>

<h3 id="position:flipvertical">:flipvertical&emsp;<span class='normal'>(Vertikale Spiegelung)</span></h3>

<p>
Dei vertikale Spiegelungstransformation (&#x21d2;
<a href="CQL-Transformations.html">Transformationen</a>).
</p>

<h3 id="position:inside">:inside&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(innerhalb)</span></h3>

<p>
Dieses Schlüsselwort filtert Verschiebungstransformation, bei denen
die involvierten Figuren innerhalb einer bestimmten Region auf dem
Schachbrett verbleiben. Es werden zwei Argumente erwartet, ein
Figurenbezeichner und ein Felderbezeichner. Jegliche
Verschiebungstransformation beinflußt nur das erste Argument.
Eine Verschiebungstransformation wird von der :inside-Beschränkung
gefiltert, wenn mindestens eine Figur, die mit dem ersten Argument
bezeichnet wird (wobei die Transformation mit einbezogen ist), auf einem
Feld steht das vom zweiten Argument bezeichnet wird.
</p>

<p>
Beispiel:
</p>

<p>
Wir formulieren die folgende Abfrage um Trippelbauern aufzufinden:
</p>

<div class='box'><pre><code><!--
-->(position
  <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> <span class='piece'>&#x2659;</span>[b2-7] 3
  <a href="CQL-Position-List.html#position:shifthorizontal"><span style='white-space:nowrap;'>:shifthorizontal</span></a>)<!--
--></code></pre></div>

<p>
Um Trippelbauern auf der Hauptdiagonalen (a1-h8) aufzufinden, erweitern
wir diese Abfrage:
</p>

<div class='box'><pre><code><!--
-->(position
  <span class='keyword'>:inside</span> <span class='piece'>&#x2659;</span>[b2-7] [b2,c3,d4,e5,f6,g7]
  <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> <span class='piece'>&#x2659;</span>[b2-7] 3
  <a href="CQL-Position-List.html#position:shifthorizontal"><span style='white-space:nowrap;'>:shifthorizontal</span></a>)<!--
--></code></pre></div>

<h3 id="position:shift">:shift&emsp;<span class='normal'>(Verschiebungstransformation)</span></h3>

<p>
Die Verschiebungstransformationen (&#x21d2;
<a href="CQL-Transformations.html">Transformationen</a>).
</p>

<h3 id="position:shiftdiagonal">:shiftdiagonal&emsp;<span class='normal'>(Diagonale Verschiebung)</span></h3>

<p>
Die (haupt-)diagonale und gegendiagonale Verschiebungstransformation (&#x21d2;
<a href="CQL-Transformations.html">Transformationen</a>).
</p>

<h3 id="position:shifthorizontal">:shifthorizontal&emsp;<span class='normal'>(Horizontale Verschiebung)</span></h3>

<p>
Die horizontale Verschiebungstransformation (&#x21d2;
<a href="CQL-Transformations.html">Transformationen</a>).
</p>

<h3 id="position:shiftmaindiagonal">:shiftmaindiagonal&emsp;<span class='normal'>(Hauptdiagonale Verschiebung)</span></h3>

<p>
Die (haupt-)diagonale Verschiebungstransformation (&#x21d2;
<a href="CQL-Transformations.html">Transformationen</a>).
</p>

<h3 id="position:shiftoffdiagonal">:shiftoffdiagonal&emsp;<span class='normal'>(Gegendiagonale Verschiebung)</span></h3>

<p>
Die gegendiagonale Verschiebungstransformation (&#x21d2;
<a href="CQL-Transformations.html">Transformationen</a>).
</p>

<h3 id="position:shiftvertical">:shiftvertical&emsp;<span class='normal'>(Vertikale Verschiebung)</span></h3>

<p>
Die vertikale Verschiebungstransformation (&#x21d2;
<a href="CQL-Transformations.html">Transformationen</a>).
</p>

<h2 id="piece">Schlüsselwörter für die Figurenanalyse</h2>

<ul style='list-style-type: none'><li>
  <table>
    <tr><td>&#x2022;</td><td><a href="#position:attackcount">:attackcount</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:piececount">:piececount</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:power">:power</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:powerdifference">:powerdifference</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:ray">:ray</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:rayattack">:rayattack</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:raydiagonal">:raydiagonal</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:rayhorizontal">:rayhorizontal</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:rayorthogonal">:rayorthogonal</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:rayvertical">:rayvertical</a></td></tr>
  </table>
</li></ul>

<h3 id="position:attackcount">:attackcount&emsp;<span class='normal'>(Angriffs-Zähler)</span></h3>

<p>
Dieses Schlüsselwort erwartet als Argumente zwei Figurenbezeichner, gefolgt
von einer <a href="CQL-Range-Specifiers.html">Bereichsangabe</a>. Der erste
ist der Figurenbezeichner der attackierenden Figuren, der zweite ist
der Figurenbezeichner der angegriffenen Figuren. Ein Angriff einer Figur
auf ein Feld liegt vor, wenn die bezeichnete Figur auf dieses Feld ziehen kann.
:attackcount zählt alle gültigen Züge (Angriffe), deren Ausgangsfeld vom ersten
Argument bezeichnet wird, und deren Zielfeld vom zweiten Argument bezeichnet
wird.
</p>

<p>
<img src="../images/gameflag-Illegal-Move.png">
<a href="http://www.rbnn.com/cql/">CQL Manual<span class="awesome">&nbsp;&#xf08e;</span></a> sagt aus:
"disregarding any possible checks"; dies ergibt keinen Sinn.
</p>

<p>
Das Schlüsselwort :attackcount filtert eine Position, wenn dir Gesamtzahl
aller gültigen Angriffe in dieser Position innerhalb der gegebenen
Bereichsangabe liegt.
</p>

<p>
Beispiele:
</p>

<div class='verb'><code>
(position <span class='keyword'>:attackcount</span> A <span class='piece'>&#x265a;</span> 2)
</code></div>

<p>
Filtert jede Position mit einem Doppelangriff weißer Figuren auf den
schwarzen König (jedoch sollte für diese Abfrage 
<a href="CQL-Position-List.html#position:doublecheck"><span style='white-space:nowrap;'>:doublecheck</span></a> in Verbindung mit <a href="CQL-Position-List.html#position:btm"><span style='white-space:nowrap;'>:btm</span></a>
vorgezogen werden).
</p>

<div class='verb'><code>
(position <span class='keyword'>:attackcount</span> A <span class='piece'>&#x265a;</span> 2 <a href="CQL-Position-List.html#position:flipcolor"><span style='white-space:nowrap;'>:flipcolor</span></a>)
</code></div>

<p>
Filtert jede Position mit einem Doppelangriff auf einen König
(auch hier sollte <a href="CQL-Position-List.html#position:doublecheck"><span style='white-space:nowrap;'>:doublecheck</span></a> vorgezogen werden).
</p>

<div class='verb'><code>
(position <span class='keyword'>:attackcount</span> A .h3 1)
</code></div>

<p>
Filtert eine Position, in der genau eine weiße Figur auf das freie Feld h3
ziehen kann.
</p>

<div class='verb'><code>
(position <span class='keyword'>:attackcount</span> [<span class='piece'>&#x2656;</span><span class='piece'>&#x2657;</span>][a-c8] ??1 5 9
</code></div>

<p>
Filtert eine Position, in der die Anzahl der Möglichkeiten, daß ein weißer
Turm oder ein weißer Läufer auf den Feldern a8, b8, oder c8 auf ein Feld
der ersten Reihe ziehen kann, zwischen 5 und 9 liegt (inklusive).
</p>

<div class='verb'><code>
(position <span class='keyword'>:attackcount</span> <span class='piece'>&#x265e;</span> [<span class='piece'>&#x2654;</span><span class='piece'>&#x2656;</span><span class='piece'>&#x2655;</span>] 3 100) 
</code></div>

<p>
Filtert eine Position, in der es genau drei Möglichkeiten gibt, daß ein
schwarzer Springer den weißen König oder eine weiße Schwerfigur attackiert.
</p>

<h3 id="position:piececount">:piececount&emsp;<span class='normal'>(Figurenzähler)</span></h3>

<p>
Dieses Schlüsselwort erwartet als Argument einen Figurenbezeichner, gefolgt
von einer <a href="CQL-Range-Specifiers.html">Bereichsangabe</a>. Es filtert
eine Position genau dann, wenn die Anzahl der Vorkommen einer bezeichneten
Figur in dieser Position innerhalb der gegebenen Bereichsangabe liegt.
</p>

<p>
Beispiele:
</p>

<div class='verb'><code>
(position <span class='keyword'>:piececount</span> <span class='piece'>&#x2656;</span> 2)
</code></div>

<p>
Dies wird jede Position filtern mit exakt zwei weißen Türmen - eine Position
mit drei weißen Türmen würde nicht gefiltert werden.
</p>

<div class='box'><pre><code><!--
-->(position 
  <span class='keyword'>:piececount</span> [<span class='piece'>&#x2656;</span><span class='piece'>&#x265c;</span>][a1-8] 1 3 
  <span class='keyword'>:piececount</span> [<span class='piece'>&#x2655;</span><span class='piece'>&#x265b;</span>][a-h8] 4 
  <span class='piece'>&#x2658;</span>d4)<!--
--></code></pre></div>

<p>
Dies wird jede Position filtern mit einem weißen Springer auf d4, ein bis drei
Türmen auf eine Linie, und exakt vier Damen auf der achten Reihe. Ein alternative
Schreibweise dieser Abfrage ist:
</p>

<div class='box'><pre><code><!--
-->(position 
  <span class='piece'>&#x2658;</span>d4
  <span class='keyword'>:piececount</span> [<span class='piece'>&#x2656;</span><span class='piece'>&#x265c;</span>][a?] 1 3 
  <span class='keyword'>:piececount</span> [<span class='piece'>&#x2655;</span><span class='piece'>&#x265b;</span>][?8] 4)<!--
--></code></pre></div>

<h3 id="position:power">:power&emsp;<span class='normal'>(Figurenpotential)</span></h3>

<p>
Dieses Schlüsselwort erwartet als Argument einen Figurenbezeichner, gefolgt
von einer <a href="CQL-Range-Specifiers.html">Bereichsangabe</a>. Es wird
jede Position gefiltert, in der das Gesamtfigurenpotential in dieser Position
innerhalb der gegebenen Bereichsangabe liegt. Das Potential einer Figur
ist sein Materialwert, abhängig von der Schachform:
</p>

<ul style='list-style-type: none'><li>
  <table cellpadding="3">
    <tr>
      <td align="right"></td>
      <td align="right"><span class='chess'>&#x2654;</span></td>
      <td align="right"><span class='chess'>&#x2655;</span></td>
      <td align="right"><span class='chess'>&#x2656;</span></td>
      <td align="right"><span class='chess'>&#x2657;</span></td>
      <td align="right"><span class='chess'>&#x2658;</span></td>
      <td align="right"><span class='chess'>&#x2659;</span></td>
    </tr>
    <tr>
      <td>Normalschach, Dreimal-Schach&emsp;</td>
      <td align="right"> 0</td>
      <td align="right"> 9</td>
      <td align="right"> 5</td>
      <td align="right"> 3</td>
      <td align="right"> 3</td>
      <td align="right"> 1</td>
    </tr>
    <tr>
      <td>Einsetzschach, Tandemschach&emsp;</td>
      <td align="right"> 0</td>
      <td align="right"> 5</td>
      <td align="right"> 3</td>
      <td align="right"> 3</td>
      <td align="right"> 3</td>
      <td align="right"> 1</td>
    </tr>
    <tr>
      <td>Losers&emsp;</td>
      <td align="right"> 0</td>
      <td align="right"> 5</td>
      <td align="right"> 4</td>
      <td align="right"> 3</td>
      <td align="right"> 4</td>
      <td align="right"> 1</td>
    </tr>
    <tr>
      <td>Suicide, Giveaway&emsp;</td>
      <td align="right">30</td>
      <td align="right"> 3</td>
      <td align="right"> 9</td>
      <td align="right"> 0</td>
      <td align="right"> 9</td>
      <td align="right"> 1</td>
    </tr>
  </table>
</li></ul>

<p>
Beispiele:
</p>

<div class='verb'><code>
(position <span class='keyword'>:power</span> a 6)
</code></div>

<p>
Dies wird Positionen finden deren Gesamtfigurenpotential aller schwarzen
Figuren genau den Wert 6 hat.
</p>

<div class='verb'><code>
(position <span class='keyword'>:power</span> A[a-h1-4] 10 25)
</code></div>

<p>
Dies wird Positionen finden deren Gesamtfigurenpotential aller weißen
Figuren in der weißen Hälfte einen Wert zwischen 10 und 25 hat (inklusive).
</p>

<h3 id="position:powerdifference">:powerdifference&emsp;<span class='normal'>(Figurenpotentialdifferenz)</span></h3>

<p>
Dieses Schlüsselwort erwartet als Argument einen Figurenbezeichner, gefolgt
von einer <a href="CQL-Range-Specifiers.html">Bereichsangabe</a>. Es filtert
Positionen in denen die Differenz des Figurenpotentials (&#x21d2;
<a href="CQL-Position-List.html#position:power"><span style='white-space:nowrap;'>:power</span></a>) der weißen und schwarzen Figuren, die vom ersten
Argument bezeichnet werden, innerhalb der gegebenen Bereichsangabe liegt.
D.h. das Figurenpotential aller bezeichneten weißen Figuren minus dem
Figurenpotential aller bezeichneten schwarzen Figuren muß innerhalb der
Bereichsangabe liegen.
</p>

<p>
Beispiele:
</p>

<div class='verb'><code>
(position <span class='keyword'>:powerdifference</span> U 4)
</code></div>

<p>
Dies filtert Positionen, in denen das Potential der weißen Figuren genau
um 4 größer ist als das Potential der schwarzen Figuren.
</p>

<div class='verb'><code>
(position <span class='keyword'>:powerdifference</span> [<span class='piece'>&#x2656;</span><span class='piece'>&#x265c;</span>] -5 10)
</code></div>

<p>
Diese filtert Positionen, in denen Weiß ein Potential zwischen einem Turm
Materialnachteil und zwei Türmen Materialvorteil besitzt (wobei diese
Formulierung nicht auf andere Schachformen zutrifft).
</p>

<div class='verb'><code>
(position <span class='keyword'>:powerdifference</span> [<span class='piece'>&#x2656;</span><span class='piece'>&#x265c;</span><span class='piece'>&#x2657;</span><span class='piece'>&#x265d;</span><span class='piece'>&#x2658;</span><span class='piece'>&#x265e;</span>] unlimited -2)
</code></div>

<p>
Dies filtert Positionen, in denen Schwarz mindestens eine Qualität Vorteil hat
(auch diese Formulierung trifft nicht auf andere Schachformen zu).
</p>

<div class='box'><pre><code><!--
-->(match
  (position
    <a href="CQL-Match-List.html#match:result"><span style='white-space:nowrap;'>:result</span></a> 1-0
    <a href="CQL-Position-List.html#position:sequence"><span style='white-space:nowrap;'>:sequence</span></a> (
      (position
        <span class='keyword'>:powerdifference</span> [<span class='piece'>&#x2655;</span><span class='piece'>&#x265b;</span>] unlimited -9
        <span class='keyword'>:powerdifference</span> U unlimited -9)
      (position <span class='keyword'>:powerdifference</span> [<span class='piece'>&#x2655;</span><span class='piece'>&#x265b;</span>] unlimited -9)
      (position <span class='keyword'>:powerdifference</span> [<span class='piece'>&#x2655;</span><span class='piece'>&#x265b;</span>] unlimited -9)
      (position <span class='keyword'>:powerdifference</span> [<span class='piece'>&#x2655;</span><span class='piece'>&#x265b;</span>] unlimited -9)
      (position <span class='keyword'>:powerdifference</span> [<span class='piece'>&#x2655;</span><span class='piece'>&#x265b;</span>] unlimited -9)
      (position <span class='keyword'>:powerdifference</span> [<span class='piece'>&#x2655;</span><span class='piece'>&#x265b;</span>] unlimited -9)
      (position <span class='keyword'>:powerdifference</span> [<span class='piece'>&#x2655;</span><span class='piece'>&#x265b;</span>] unlimited -9)
      (position <span class='keyword'>:powerdifference</span> [<span class='piece'>&#x2655;</span><span class='piece'>&#x265b;</span>] unlimited -9)
      (position <span class='keyword'>:powerdifference</span> [<span class='piece'>&#x2655;</span><span class='piece'>&#x265b;</span>] unlimited -9)
      (position <span class='keyword'>:powerdifference</span> [<span class='piece'>&#x2655;</span><span class='piece'>&#x265b;</span>] unlimited -9)
      (position <span class='keyword'>:powerdifference</span> [<span class='piece'>&#x2655;</span><span class='piece'>&#x265b;</span>] unlimited -9)
      (position <span class='keyword'>:powerdifference</span> [<span class='piece'>&#x2655;</span><span class='piece'>&#x265b;</span>] unlimited -9))
    <a href="CQL-Position-List.html#position:flipcolor"><span style='white-space:nowrap;'>:flipcolor</span></a>))<!--
--></code></pre></div>

<p>
Dieses Beispiel zeigt eine Möglichkeit auf, wie mit Hilfe von :powerdifference
nach Damenopfern gesucht wird. Eine Seite opfert eine Dame, und verbleibt
mindestens 12 Züge lang mit mindestens 9 Bauern Materialnachteil, um
letztendlich zu gewinnen.
</p>

<h3 id="position:ray">:ray&emsp;<span class='normal'>(Strahl)</span></h3>

<p>
Ein Strahl bezeichnet eine Liste von Figurenbezeichnern. Es ist eine
zusammenhängende Menge von Feldern entweder auf einer Linie, einer Reihe,
oder einer Diagonalen auf dem Schachbrett.
</p>

<p>
Sei R ein Felderstrahl mit einer geordneten Menge von Feldern in einer
zusammenhängenden Linie, Reihe, oder Diagonalen
S&#x2081;, S&#x2082;,...,S&#x2090;. Gegeben sei eine Strahlendefinition
(G&#x2081;, G&#x2082;,...,G&#x2093;), wobei jedes G einen Figurenbezeichner
definiert. Der Felderstrahl R ist gültig in Bezug auf die gegebene
Strahlendefinition wenn G&#x2081; eine Figur auf dem Feld S&#x2081;
bezeichnet, G&#x2093; eine Figur auf dem Feld S&#x2090; bezeichnet, und wenn
alle anderen G's jeweils mit einem Feld einer Untermenge des Felderstrahls
gepaart werden können ohne die Reihenfolge zu verletzen, so daß jedes G eine
Figur auf dem zugeordneten Feld bezeichnet, und alle ungepaarten Felder leer
sind.
</p>

<p>
Das Schlüsselwort :ray erwartet eine Strahlendefinition und eine optionale
<a href="CQL-Range-Specifiers.html">Bereichsangabe</a>. Wenn die Bereichsangabe
nicht vorhanden ist, so wird <span style='white-space:nowrap;'><code>1</code>
<code>unlimited</code></span> als Bereich angenommen. :ray filtert eine Position
wenn die Anzahl der Felderstrahlen in dieser Position, die in Bezug auf die
Strahlendefinition gültig sind, innerhalb der Bereichsangabe liegen.
</p>

<p>
Beispiele:
</p>

<div class='verb'><code>
(position <span class='keyword'>:ray</span> (<span class='piece'>&#x265a;</span> <span class='piece'>&#x2655;</span>)) 
</code></div>

<p>
Filtert eine Position, in der eine weiße Dame den schwarzen König attackiert.
</p>

<div class='verb'><code>
(position <span class='keyword'>:ray</span> (<span class='piece'>&#x2655;</span>a? <span class='piece'>&#x265e;</span> <span class='piece'>&#x265a;</span>[?4-8]))
</code></div>

<p>
Filtert eine Position, in der eine weiße Dame auf der a-Linie einen schwarzen
Springer fesselt, und der schwarze König auf den letzten vier Reihen steht.
</p>

<div class='verb'><code>
(position <span class='keyword'>:ray</span> (<span class='piece'>&#x2655;</span>a? <span class='piece'>&#x2655;</span>c? <span class='piece'>&#x2655;</span>e? <span class='piece'>&#x265a;</span>g?))
</code></div>

<p>
Filtert entweder eine Position, in der alle drei weißen Damen und der schwarze
König auf der gleichen Reihe stehen mit jeweils exakt einem Leerfeld zwischen
diesen Figuren, oder eine Position, in der alle drei weißen Damen und der
schwarze König eine Diagonale formen mit jeweils einem Leerfeld zwischen diesen
Figuren, und die Damen stehen in beiden Fällen auf den a, c, und e-Linien.
</p>

<div class='verb'><code>
(position <span class='keyword'>:ray</span> (<span class='piece'>&#x2655;</span> <span class='piece'>&#x265e;</span> <span class='piece'>&#x265a;</span>) 2 4)
</code></div>

<p>
Zwei bis vier schwarze Springer sind gefesselt.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:rayattack"><span style='white-space:nowrap;'>:rayattack</span></a>.
</p>

<h3 id="position:rayattack">:rayattack&emsp;<span class='normal'>(Strahlenangriff)</span></h3>

<p>
Hat die gleiche Syntax wie <a href="CQL-Position-List.html#position:ray"><span style='white-space:nowrap;'>:ray</span></a>. Es hat auch die gleiche
Semantik, außer das nur orthogonale Strahlen, die auf einem Feld mit einer
Schwerfigur starten, sowie diagonale Strahlen, die auf einem Feld mit einer
diagonal ziehenden Figur (Dame oder Läufer) starten, eingeschlossen sind.
</p>

<p>
Beispiele:
</p>

<div class='verb'><code>
(position <span class='keyword'>:rayattack</span> (A a <span class='piece'>&#x265a;</span>))
</code></div>

<p>
Filtert eine Position, in der eine schwarze Figur gefesselt ist.
</p>

<div class='verb'><code>
(position <span class='keyword'>:rayattack</span> (Ad5 a [<span class='piece'>&#x265c;</span><span class='piece'>&#x265a;</span>][a-h1-4]) 3)
</code></div>

<p>
Filtert Positionen, in denen drei schwarze Figuren von einer weißen Figur auf
d5 gefesselt werden, wobei ein schwarzer Turm und der schwarze König auf den
ersten vier Reihen stehen.
</p>

<div class='verb'><code>
(position <a href="CQL-Position-List.html#position:stalemate"><span style='white-space:nowrap;'>:stalemate</span></a> <span class='keyword'>:rayattack</span>
(A a <span class='piece'>&#x265a;</span>) 2 8 <a href="CQL-Position-List.html#position:flipcolor"><span style='white-space:nowrap;'>:flipcolor</span></a>)
</code></div>

<p>
Findet Pattstellungen mit Mehrfachfesselungen auf.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:ray"><span style='white-space:nowrap;'>:ray</span></a>.
</p>

<h3 id="position:raydiagonal">:raydiagonal&emsp;<span class='normal'>(Diagonalstrahl)</span></h3>

<p>
Dieses Schlüsselwort arbeitet genauso wie <a href="CQL-Position-List.html#position:ray"><span style='white-space:nowrap;'>:ray</span></a>, nur daß die
Strahlen auf diagonale Linien beschränkt sind. Ein diagonaler Strahl arbeitet
auf der Diagonalen.
</p>

<h3 id="position:rayhorizontal">:rayhorizontal&emsp;<span class='normal'>(Horizontaler Strahl)</span></h3>

<p>
Dieses Schlüsselwort arbeitet genauso wie <a href="CQL-Position-List.html#position:ray"><span style='white-space:nowrap;'>:ray</span></a>, nur daß die
Strahlen auf horizontale Linien beschränkt sind. Ein horizontaler Strahl
arbeitet auf der Horizontalen.
</p>

<h3 id="position:rayorthogonal">:rayorthogonal&emsp;<span class='normal'>(Othogonaler Strahl)</span></h3>

<p>
Dieses Schlüsselwort arbeitet genauso wie <a href="CQL-Position-List.html#position:ray"><span style='white-space:nowrap;'>:ray</span></a>, nur daß die
Strahlen auf vertikale und horizontale Linien beschränkt sind. Ein orthogonaler
Strahl arbeitet auf der Horizontalen und Vertikalen.
</p>

<h3 id="position:rayvertical">:rayvertical&emsp;<span class='normal'>(Vertikaler Strahl)</span></h3>

<p>
Dieses Schlüsselwort arbeitet genauso wie <a href="CQL-Position-List.html#position:ray"><span style='white-space:nowrap;'>:ray</span></a>, nur daß die
Strahlen auf  vertikale Linien beschränkt sind. Ein vertikaler Strahl arbeitet
auf der Vertikalen.
</p>

<h2 id="move">Schlüsselwörter für die Zuganalyse</h2>

<p>
Ein Zug hat drei Ausprägungen: einen Herkunftsbezeichner, einen
Zielbezeichner, und einen Bauernumwandlungsbezeichner. Diese beziehen
sich auf die Figur und das Feld von der dieser Zug weggeht; die Figur und
das Feld wohin dieser Zug geht (aber bevor dieser Zug tatsächlich erfolgt),
und die Figur und das Feld wo eine Bauernumwandlung stattfindet, sofern eine
solche vorhanden. In den Schachformen Einsetzschach und
Tandemschach hat ein Zug noch eine vierte Ausprägung: den
Figurenartbezeichner für die Einsetzfigur. Er bezieht sich auf die Figurenart die
eingesetzt wird, sofern eine solche vorhanden.
</p>

<p>
Beispielsweise ist der Zielbezeichner für einen weißen Turm auf a4, der
einen schwarzen Springer auf d4 schlägt: <span style='white-space:nowrap;'><code><span class='piece'>&#x265e;</span>d4</code></span>, und der
Herkunftsbezeichner ist <span style='white-space:nowrap;'><code><span class='piece'>&#x2656;</span>a4</code></span>. Der Zielbezeichner eines
Zuges nach e4, der keine Figur schlägt, ist <span style='white-space:nowrap;'><code>.e4</code></span>.
</p>

<ul style='list-style-type: none'><li>
  <table>
    <tr><td>&#x2022;</td><td><a href="#position:enpassant">:enpassant</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:iscastling">:iscastling</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:movefrom">:movefrom</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:movenumber">:movenumber</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:moveto">:moveto</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:nocastling">:nocastling</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:noenpassant">:noenpassant</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:nopiecedrop">:nopiecedrop</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:piecedrop">:piecedrop</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:promote">:promote</a></td></tr>
  </table>
</li></ul>

<h3 id="position:enpassant">:enpassant</h3>

<p>
Der nächste Zug ist ein en passant (Schlag-)Zug.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:noenpassant"><span style='white-space:nowrap;'>:noenpassant</span></a>
</p>

<h3 id="position:iscastling">:iscastling&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Rochadezug?)</span></h3>

<p>
Der nächste Zug ist eine Rochade.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:nocastling"><span style='white-space:nowrap;'>:nocastling</span></a>.
</p>

<h3 id="position:movefrom">:movefrom&emsp;<span class='normal'>(Zug von)</span></h3>

<p>
Erwartet als Parameter eine Figurenbezeichner. Eine Position wird gefiltert,
wenn dieser Figurenbezeichner den Herkunftsbezeichner des nächsten Zuges
beinhaltet.
</p>

<p>
Beispiele:
</p>

<div class='verb'><code>
(position <span class='keyword'>:movefrom</span> <span class='piece'>&#x2656;</span>a3)
</code></div>

<p>
Filter eine Position, in der der nächste Zug ein Turmzug von a3 ist.
</p>

<div class='verb'><code>
(position <span class='keyword'>:movefrom</span> U?8)
</code></div>

<p>
Filter eine Position, in der die Figurenart des nächsten Zug einer Figurenart
auf der achten Reihe gleicht.
</p>

<h3 id="position:movenumber">:movenumber&emsp;<span class='normal'>(Zugnummer)</span></h3>

<p>
:movenumber erwartet als Argument eine
<a href="CQL-Range-Specifiers.html">Bereichsangabe</a>, und filtert eine
Position nur dann, wenn die aktuelle Zugnummer innerhalb des gegebenen
Bereichs liegt. Die Zugnummernzählung geht von einem Anzugsrecht der
weißen Seite aus, und könnte deshalb um eine Nummer niedriger sein, wenn
Scharz das Anzugsrecht hat.
</p>

<p>
Beispiele:
</p>

<div class='verb'><code>
(position <span class='keyword'>:movenumber</span> 10 20 <a href="CQL-Position-List.html#position:check"><span style='white-space:nowrap;'>:check</span></a>)
</code></div>

<p>
Filtert eine Position, in der ein Schachgebot zwischen dem 10. und dem
20. Zug erfolgt.
</p>

<div class='verb'><code>
(position <span class='keyword'>:movenumber</span> 35 <a href="CQL-Position-List.html#position:mate"><span style='white-space:nowrap;'>:mate</span></a>)
</code></div>

<p>
Filtert eine Position, in der im 35. Zug mattgesetzt wird.
</p>

<h3 id="position:moveto">:moveto&emsp;<span class='normal'>(Zug nach)</span></h3>

<p>
Erwartet ale Argument einen Figurenbezeichner. Es filtert einen Zug
wenn dieses Argument den Zielbezeichner des Zuges beinhaltet.
</p>

<p>
Beispiele:
</p>

<div class='verb'><code>
(position <span class='keyword'>:moveto</span> U)
</code></div>

<p>
Filtert eine Position dessen nächster Zug ein Schlagzug ist.
</p>

<div class='verb'><code>
(position <span class='keyword'>:moveto</span> .)
</code></div>

<p>
Filtert eine Position dessen nächster Zug kein Schlagzug ist.
</p>

<div class='verb'><code>
(position <span class='keyword'>:moveto</span> <span class='piece'>&#x2656;</span>[b1-8])
</code></div>

<p>
Filtert eine Position, in der der nächste Zug einen weißen Turm auf der
f-Linie schlagen wird. Beachte das dies sehr verschieden ist von der
Interpretation einer Zugbeschreibung in
<a href="http://www.saremba.de/chessgml/standards/pgn/pgn-complete.htm">PGN<span class="awesome">&nbsp;&#xf08e;</span></a>&#x2006;:
dort würde dies als ein Turmzug auf die b-Linie interpretiert werden.
Und dies wiederum geschieht in CQL auf diese Weise:
</p>

<div class='verb'><code>
(position <a href="CQL-Position-List.html#position:movefrom"><span style='white-space:nowrap;'>:movefrom</span></a> <span class='piece'>&#x2656;</span> <span class='keyword'>:moveto</span> ?b?)
</code></div>

<p>
Filtert einen Zug, in dem der weiße Turm auf die b-Linie zieht.
</p>

<h3 id="position:nocastling">:nocastling&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(kein Rochadezug?)</span></h3>

<p>
Der nächste Zug ist keine Rochade.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:iscastling"><span style='white-space:nowrap;'>:iscastling</span></a>.
</p>

<h3 id="position:noenpassant">:noenpassant&emsp;<span class='normal'>(kein En-Passant-Zug?)</span></h3>

<p>
Der nächste Zug ist kein en passant (Schlag-)Zug.
</p>

<p>
Siehe auch: <a href="CQL-Position-List.html#position:enpassant"><span style='white-space:nowrap;'>:enpassant</span></a>.
</p>

<h3 id="position:piecedrop">:piecedrop&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Einsetzzug)</span></h3>

<p>
Der nächste Zug ist ein Einsetzzug, wobei der im Argument gebenene
Figurenartbezeichner den Figurenartbezeichner für die Einsetzfigur des
nächsten Zuges beinhalten muß. Dies ist bei einem nichtleeren
Figurenartbezeichner nur möglich in den Schachformen
Einsetzschach und Tandemschach).
</p>

<p>
Beispiele:
</p>

<div class='verb'><code>
(position <span class='keyword'>:piecedrop</span> [<span class='piece'>&#x2658;</span><span class='piece'>&#x265e;</span>])
</code></div>

<p>
Der nächste Zug ist ein Einsetzzug, der einen Springer einsetzen wird.
</p>

<div class='verb'><code>
(position <span class='keyword'>:piecedrop</span> [])
</code></div>

<p>
Der nächste Zug ist kein Einsetzzug (denn der Figurenartbezeichner ist
leer).
</p>

<h3 id="position:promote">:promote&emsp;<span class='normal'>(Bauernumwandlung)</span></h3>

<p>
Erwartet als argument einen Figurenbezeichner. Ein Zug wird gefiltert wenn
es sich um eine Bauernumwandlung handelt, und der gegebene Figurenbezeichner
den Bauernumwandlungsbezeichner des Zuges beinhaltet.
</p>

<p>
Beispiele:
</p>

<div class='verb'><code>
(position <span class='keyword'>:promote</span> [<span class='piece'>&#x2656;</span><span class='piece'>&#x2657;</span><span class='piece'>&#x2658;</span>])
</code></div>

<p>
Filtert eine Position dessen nächster Zug eine weiße Unterverwandlung ist.
</p>

<div class='verb'><code>
(position <span class='keyword'>:promote</span> [<span class='piece'>&#x2657;</span><span class='piece'>&#x2658;</span>]a8)
</code></div>

<p>
Filtert eine Position dessen nächster Zug eine weiße Bauernumwandlung in
eine Leichtfigur ist.
</p>

<div class='verb'><code>
(position <span class='keyword'>:promote</span> [<span class='piece'>&#x2656;</span>e8]
<a href="CQL-Position-List.html#position:movefrom"><span style='white-space:nowrap;'>:movefrom</span></a> <span class='piece'>&#x2659;</span>f7 <a href="CQL-Position-List.html#position:moveto"><span style='white-space:nowrap;'>:moveto</span></a> <span class='piece'>&#x265b;</span>)
</code></div>

<p>
Filtert eine Position, in der der nächster Zug einen Bauern von f7 nach e8
zieht, wobei eine schwarze Dame geschlagen wird und eine Bauernumwandlung
in einen Turm geschieht.
</p>

<div class='verb'><code>
(position <span class='keyword'>:promote</span> [])
</code></div>

<p>
Filtert eine Position, in der der nächster Zug keine Bauernumwandlung ist
(denn der Figurenbezeichner ist leer).
</p>

<h2 id="sequence">Schlüsselwörter für Sequenzen</h2>

<ul style='list-style-type: none'><li>
  <table>
    <tr><td>&#x2022;</td><td><a href="#position:gappedsequence">:gappedsequence</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:sequence">:sequence</a></td></tr>
  </table>
</li></ul>

<h3 id="position:gappedsequence">:gappedsequence&emsp;<span class='normal'>(Folge)</span></h3>

<p>
Erwartet als Argument eine Liste von Positionslisten. Eine Positionsliste A
wird als eine Verfeinerung einer Positionsliste B definiert, wenn A aus B
geformt werden kann durch das Einfügen von beliebig vielen (einschließlich Null)
Listen der Form <span style='white-space:nowrap;'><code>(position)</code></span> auf oberster Ebene in B. Zum Beispiel:
</p>

<div class='verb'><code>
((position <span class='piece'>&#x2658;</span>a4) (position) (position <span class='piece'>&#x2656;</span>b2))
</code></div>

<p>
verfeinert
</p>

<div class='verb'><code>
((position <span class='piece'>&#x2658;</span>a4) (position <span class='piece'>&#x2656;</span>b2))
</code></div>

<p>
denn es wurde geformt durch das Einfügen einer einzelnen Position in die
letztere Liste.
</p>

<p>
Eine Folge (:gappedsequence) mit Argument B filtert eine Position genau dann,
wenn es eine Verfeinerung A von B gibt, so daß eine Aufeinanderfolge
(<a href="CQL-Position-List.html#position:sequence"><span style='white-space:nowrap;'>:sequence</span></a>) mit Argument A diese Position filtern würde.
D.h., :gappedsequence ist wie <a href="CQL-Position-List.html#position:sequence"><span style='white-space:nowrap;'>:sequence</span></a>, außer das die
Aufeinanderfolge von filternden Positionen dazwischenliegende Positionen
der Partie enthalten kann.
</p>

<p>
Beispiele:
</p>

<div class='box'><pre><code><!--
-->(position
  <span class='keyword'>:gappedsequence</span> (
    (position <a href="CQL-Position-List.html#position:movefrom"><span style='white-space:nowrap;'>:movefrom</span></a> <span class='piece'>&#x2656;</span>a3)
    (position <a href="CQL-Position-List.html#position:movefrom"><span style='white-space:nowrap;'>:movefrom</span></a> <span class='piece'>&#x2656;</span>b4)))<!--
--></code></pre></div>

<p>
Diese wird jede Position filtern, die mit der ersten Position in der Liste
von :gappedsequence startet, und nach Null oder mehr weiteren
aufeinanderfolgenden Positionen in der Partie die zweite Position von
:gappedsequence auffindet. Dasselbe Ergebnis kann viel effektiver auf
folgende Weise ermittelt werden:
</p>

<p>
<img src="../images/gameflag-Illegal-Move.png">
Das ist zu prüfen!
</p>

<div class='box'><pre><code><!--
-->(position 
  <a href="CQL-Position-List.html#position:initial"><span style='white-space:nowrap;'>:initial</span></a>
  <span class='keyword'>:gappedsequence</span> (
    (position <a href="CQL-Position-List.html#position:movefrom"><span style='white-space:nowrap;'>:movefrom</span></a> <span class='piece'>&#x2656;</span>a3)
    (position <a href="CQL-Position-List.html#position:movefrom"><span style='white-space:nowrap;'>:movefrom</span></a> <span class='piece'>&#x2656;</span>b4)))<!--
--></code></pre></div>

<p>
Die folgende Positionsliste filtert eine Position, in der der Springer auf d4
steht in irgendeiner Partiestellung, aber nach der gefundenen Position:
</p>

<div class='box'><pre><code><!--
-->(position
  <span class='keyword'>:gappedsequence</span> (
    (position)
    (position <span class='piece'>&#x2658;</span>d4))) <!--
--></code></pre></div>

<p>
Beachte daß das erste Element des Arguments von :gappedsequence, nämlich
<span style='white-space:nowrap;'><code>(position)</code></span>, nur benutzt wird, um zu erreichen das nur Springer
auf d4 in Positionen gefunden werden, die nach der gefilterten Position
liegen. Dazu ein vollständiges Beispiel:
</p>

<div class='box'><pre><code><!--
-->(match
  <span class='comment'>; iteriere über alle in Frage kommenden Springer</span>
  <a href="CQL-Position-List.html#position:forany"><span style='white-space:nowrap;'>:forany</span></a> knight [Nn]
  (position
    <span class='comment'>; die markierte Figur ist tatsächlich ein Springer</span>
    <span class='comment'>; auf d4, kein umgewandelter Bauer</span>
    <a href="CQL-Position-List.html#position:tagmatch"><span style='white-space:nowrap;'>:tagmatch</span></a> knight [Nn]d4
    <span class='comment'>; sorge dafür das es das letzte derartige Vorkommen ist</span>
    <a href="CQL-Position-List.html#position:not"><span style='white-space:nowrap;'>:not</span></a> (position <span class='keyword'>:gappedsequence</span>
      ((position) (position $knight[d4])))
    <span class='comment'>; nun wiederhole mit anderen Feldern außer e4</span>
    <a href="CQL-Position-List.html#position:shift"><span style='white-space:nowrap;'>:shift</span></a>
    <span class='comment'>; filtere wenn mindestens 20 verschiedene Felder gefunden wurden</span>
    <a href="CQL-Position-List.html#position:matchcount"><span style='white-space:nowrap;'>:matchcount</span></a> 20 65))<!--
--></code></pre></div>

<p>
Finde Partien, in denen ein Springer mindestens 20 verschiedene Felder
besuchte. Dies wird bewerkstelligt durch das Zählen von Positionen, die vom
Springer nicht noch ein zweites Mal besucht werden. Felder die von einem
Bauern besucht werden, der später in einen Springer verwandelt, sind nicht
in der Zählung enthalten.
</p>

<p>
Die Gesamtzahl von <a href="CQL-Position-List.html#position:sequence"><span style='white-space:nowrap;'>:sequence</span></a> und :gappedsequence
Positionslisten, die auf oberster Ebene einer Positionsliste auftreten
können, darf Eins nicht überschreiten. Um die Wirkung von beiden
Schlüsselwörtern in einer Positionsliste zu erhalten, wird mit dem
Gebrauch von <a href="CQL-Position-List.html#position:and"><span style='white-space:nowrap;'>:and</span></a> bewerkstelligt.
</p>

<p>
<img src="../images/gameflag-Illegal-Move.png">
Diese Einschränkung ist zu prüfen!
</p>

<h3 id="position:sequence">:sequence&emsp;<span class='normal'>(Aufeinanderfolge)</span></h3>

<p>
Takes a single argument that is a list of position lists. It matches a given
position if and only successive occurring positions, beginning with the
current position, match each corresponding element in its argument.
</p>

<p>
Beispiel:
</p>

<div class='box'><pre><code><!--
-->(position
  <span class='piece'>&#x2656;</span>e8 
  <span class='keyword'>:sequence</span> (
    (position <span class='piece'>&#x2655;</span>f3 .g2)
    (position .f3 <span class='piece'>&#x2655;</span>g2)))<!--
--></code></pre></div>

This position list matches exactly those positions with a white rook on e8
such that:

<ol>
  <li>In that position, white has a queen on f3 and g2 is empty, and</li>
  <li>After the next move, f3 is empty and there is a white queen on g2.</li>
</ol>

<p>
In consequence, this position list is identical in effect to
</p>

<div class='verb'><code>
(position <span class='piece'>&#x2656;</span>e8 <a href="CQL-Position-List.html#position:movefrom"><span style='white-space:nowrap;'>:movefrom</span></a> <span class='piece'>&#x2655;</span>f3 <a href="CQL-Position-List.html#position:moveto"><span style='white-space:nowrap;'>:moveto</span></a> .g2)
</code></div>

<p>
The following more typical usage of :sequence will search for all queen
staircase checking maneuvers by either side:
</p>

<div class='box'><pre><code><!--
-->(position 
  <a href="CQL-Position-List.html#position:shift"><span style='white-space:nowrap;'>:shift</span></a> <a href="CQL-Position-List.html#position:flip"><span style='white-space:nowrap;'>:flip</span></a> <a href="CQL-Position-List.html#position:flipcolor"><span style='white-space:nowrap;'>:flipcolor</span></a>
  <span class='keyword'>:sequence</span> (
    (position <a href="CQL-Position-List.html#position:movefrom"><span style='white-space:nowrap;'>:movefrom</span></a> <span class='piece'>&#x2655;</span>a2) 
    (position <a href="CQL-Position-List.html#position:check"><span style='white-space:nowrap;'>:check</span></a>) 
    (position <a href="CQL-Position-List.html#position:movefrom"><span style='white-space:nowrap;'>:movefrom</span></a> <span class='piece'>&#x2655;</span>b2) 
    (position <a href="CQL-Position-List.html#position:check"><span style='white-space:nowrap;'>:check</span></a>) 
    (position <a href="CQL-Position-List.html#position:movefrom"><span style='white-space:nowrap;'>:movefrom</span></a> <span class='piece'>&#x2655;</span>b3) 
    (position <a href="CQL-Position-List.html#position:check"><span style='white-space:nowrap;'>:check</span></a>) 
    (position <a href="CQL-Position-List.html#position:movefrom"><span style='white-space:nowrap;'>:movefrom</span></a> <span class='piece'>&#x2655;</span>c3)
    (position <a href="CQL-Position-List.html#position:check"><span style='white-space:nowrap;'>:check</span></a>)
    (position <a href="CQL-Position-List.html#position:movefrom"><span style='white-space:nowrap;'>:movefrom</span></a> <span class='piece'>&#x2655;</span>c4)))<!--
--></code></pre></div>

<p>
This position list matches any position with a white queen on a2 for which
there are successively moves by queens on the indicated squares giving check;
the <a href="CQL-Position-List.html#position:shift"><span style='white-space:nowrap;'>:shift</span></a>, <a href="CQL-Position-List.html#position:flip"><span style='white-space:nowrap;'>:flip</span></a>, and
<a href="CQL-Position-List.html#position:flipcolor"><span style='white-space:nowrap;'>:flipcolor</span></a> search for this variation reflected or
rotated anywhere on the board.
</p>

<h2 id="game">Schlüsselwörter für die Partieinformationen</h2>

<p>
Several keywords relate to the game parameters and are not affected by the
contents of the position; they are included as position list keywords instead
of match list keywords so the <a href="CQL-Position-List.html#position:flipcolor"><span style='white-space:nowrap;'>:flipcolor</span></a> can be used with
them. these are:
</p>

<ul style='list-style-type: none'><li>
  <table>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:elo">:elo</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:whiteelo">:whiteelo</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:blackelo">:blackelo</a></td>
    </tr>
    <tr>
      <td>      &#x2022;</td><td><a href="#position:rating">:rating</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:whiterating">:whiterating</a></td>
      <td>&emsp;&#x2022;</td><td><a href="#position:blackrating">:blackrating</a></td>
    </tr>
  <tr>
      <td>      &#x2022;</td><td><a href="#position:result">:result</a></td>
  </tr>
  <tr>
      <td>      &#x2022;</td><td><a href="#position:variant">:variant</a></td>
  </tr>
  </table>
</li></ul>

<h3 id="position:blackelo">:blackelo&emsp;<span class='normal'>(ELO - Schwarz)</span></h3>

<p>
This parameter takes a range specifier; the ELO of the black player must lie
within its range (&#x21d2; <a href="CQL-Range-Specifiers.html">range specifiers</a>).
</p>

<h3 id="position:blackrating">:blackrating&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Wertungszahl - Schwarz)</span></h3>

<p>
Match all games where the specified rating score of black player is between
given range.  For a detailed description see <a href="CQL-Match-List.html#match:rating"><span style='white-space:nowrap;'>:rating (match)</span></a>.
</p>

<h3 id="position:elo">:elo</h3>

<p>
This parameter expects a range specifer; the ELO of at least one of the
players must lie within the specified range (&#x21d2;
<a href="CQL-Range-Specifiers.html">range specifiers</a>)
</p>

<h3 id="position:rating">:rating&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Wertungszahl)</span></h3>

<p>
Match all games where the specified rating score of one player is between
given range.  For a detailed description see <a href="CQL-Match-List.html#match:rating"><span style='white-space:nowrap;'>:rating (match)</span></a>.
</p>

<h3 id="position:result">:result&emsp;<span class='normal'>(Ergebnis)</span></h3>

<p>
This keyword takes one argument, the same as the argument to
<a href="CQL-Match-List.html#match:result"><span style='white-space:nowrap;'>:result (match)</span></a> in a match list.
</p>

<p>
Beispiel:
</p>

<div class='box'><pre><code><!--
-->(position 
  <span class='keyword'>:result</span> 1-0 
  <a href="CQL-Position-List.html#position:whiteelo"><span style='white-space:nowrap;'>:whiteelo</span></a> 0 2300
  <a href="CQL-Position-List.html#position:blackelo"><span style='white-space:nowrap;'>:blackelo</span></a> 2600 3000
  <a href="CQL-Position-List.html#position:flipcolor"><span style='white-space:nowrap;'>:flipcolor</span></a>)<!--
--></code></pre></div>

<p>
Searches for positions in which a 2300 player or below defeated a 2600 player
or above.
</p>

<h3 id="position:variant">:variant</h3>

<p>
Für eine Beschreibung dieses Schlüsselwortes siehe beim gleichnamigen
Schlüsselwort <a href="CQL-Match-List.html#match:variant"><span style='white-space:nowrap;'>:variant (match)</span></a> der Suchliste. Dieses
Schlüsselwort wird hier bereitgestellt, um bei einzelnen Positionslisten
eine Unterscheidung zwischen den Schachformen treffen zu können.
</p>

<h3 id="position:whiteelo">:whiteelo&emsp;<span class='normal'>(ELO - Weiß)</span></h3>

<p>
This parameter takes a range specifier; the ELO of the white player must lie
within its range (&#x21d2; <a href="CQL-Range-Specifiers.html">range specifiers</a>).
</p>

<h3 id="position:whiterating">:whiterating&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Wertungszahl - Weiß)</span></h3>

<p>
Match all games where the specified rating score of white player is between
given range.  For a detailed description see <a href="CQL-Match-List.html#match:rating"><span style='white-space:nowrap;'>:rating (match)</span></a>.
</p>

<h2 id="relation">Relationen zwischen den Positionen</h2>

<ul style='list-style-type: none'><li>
  <table>
    <tr><td>&#x2022;</td><td><a href="#position:relation">:relation</a></td></tr>
  </table>
</li></ul>

<h3 id="position:relation">:relation</h3>

<p>
Takes one argument, a relation specification. is used to search for games with
pairs of positions P1 and P2 that satisfy certain properties. See
<a href="CQL-Relation-List.html">relation list</a> for a desription of
the relation specification keywords.
</p>

<h2 id="matching">Schlüsselwörter zur Zählung</h2>

<p>
Two keywords pertain to the number of positions which a position list matches.
These each take a range specifier as parameter. They can only be used in a
position list at the top level of a match list.
</p>

<ul style='list-style-type: none'><li>
  <table>
    <tr><td>&#x2022;</td><td><a href="#position:matchcount">:matchcount</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:pretransformmatchcount">:pretransformmatchcount</a></td></tr>
  </table>
</li></ul>

<h3 id="position:matchcount">:matchcount&emsp;<span class='normal'>(Übereinstimmungszähler)</span></h3>

<p>
Matches if and only if the number of times this position list matches a
position in the current game lies within the range specifier.
</p>

<p>
Beispiel:
</p>

<div class='verb'><code>
(position <a href="CQL-Position-List.html#position:moveto"><span style='white-space:nowrap;'>:moveto</span></a> [<span class='piece'>&#x2655;</span><span class='piece'>&#x265b;</span>] <span class='keyword'>:matchcount</span> 4 100)
</code></div>

<p>
Matches any game in which at least four queen captures have occurred.
</p>

<h3 id="position:pretransformmatchcount">:pretransformmatchcount&emsp;<span class='normal'>(Transformationsinvarianter Übereinstimmungszähler)</span></h3>

<p>
Has the same syntax as <a href="CQL-Position-List.html#position:matchcount"><span style='white-space:nowrap;'>:matchcount</span></a>. It matches a position if
and only if there is some transform in the transformation set associated with
the position list in which it occurs such that, were the position list
replaced by a new position list formed from the first by deleting all
transformation keywords, applying the transform to that position list, and
changing this keyword to <a href="CQL-Position-List.html#position:matchcount"><span style='white-space:nowrap;'>:matchcount</span></a>, then the position
list would match the position.
</p>

<p>
Beispiel:
</p>

<div class='box'><pre><code><!--
-->(position
  <a href="CQL-Position-List.html#position:movetoy"><span style='white-space:nowrap;'>:movetoy</span></a> [Aa]d4 
  <span class='keyword'>:pretransformmatchcount</span> 12 unlimited
  <a href="CQL-Position-List.html#position:shift"><span style='white-space:nowrap;'>:shift</span></a>))<!--
--></code></pre></div>

<p>
This would match any game in which at least 12 captures occur on the same
square. Were the :pretransformmatchcount replaced by
<a href="CQL-Position-List.html#position:matchcount"><span style='white-space:nowrap;'>:matchcount</span></a>, the position list would match games in which
at least 12 captures occurred.
</p>

<h2 id="evaluation">Schlüsselwörter für die Stellungsbeurteilun</h2>

<p>
The following keywords are analyzing positions. <a href="CQL-Position-List.html#position:evaluation"><span style='white-space:nowrap;'>:evaluation</span></a> and
<a href="CQL-Position-List.html#position:moveevaluation"><span style='white-space:nowrap;'>:moveevaluation</span></a> should be used with care, these are very slow
operations. In some cases the keywords <a href="CQL-Position-List.html#position:exchangeevaluation"><span style='white-space:nowrap;'>:exchangeevaluation</span></a> and
<a href="CQL-Position-List.html#position:maxswapevaluation"><span style='white-space:nowrap;'>:maxswapevaluation</span></a> might be an alternative, these functions are
quite faster, although quite time consuming.
</p>

<ul style='list-style-type: none'><li>
  <table>
    <tr><td>&#x2022;</td><td><a href="#position:evaluation">:evaluation</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:exchangeevaluation">:exchangeevaluation</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:maxswapevaluation">:maxswapevaluation</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:moveevaluation">:moveevaluation</a></td></tr>
  </table>
</li></ul>

<h3 id="position:evaluation">:evaluation&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Bewertung)</span></h3>

<div class='annotation'><img src='../images/annotation.png' style='float:left; margin:0 1em 0 0' alt='annotation' />
This is a very slow operation and should be restricted.
</div>

<p>
This keyword is evaluating the current position with the help of an
external chess engine. The number of parameters depends on the search mode.
There are three search modes:
</p>

<ul style='list-style-type: none'><li>
  <table>
    <!-- UCI:  "go depth <x>" -->
    <!-- WB:   "st <x>"       -->
    <tr>
      <td class="l"><span style='white-space:nowrap;'><code>depth &lt;d&gt;</code></span></td>
      <td class="r">search &lt;d&gt; plies only</td>
    </tr>

    <!-- UCI:  "go movetime <x>" -->
    <tr>
      <td class="l"><span style='white-space:nowrap;'><code>movetime &lt;ms&gt;</code></span></td>
      <td class="r">search exactly &lt;ms&gt; milli-seconds per move</td>
    </tr>

    <!-- UCI:  "go mate <x>" -->
    <tr>
      <td class="l"><span style='white-space:nowrap;'><code>mate &lt;n&gt;</code></span></td>
      <td class="r">search for a mate in &lt;n&gt; moves</td>
    </tr>
  </table>
</li></ul>

<p>
The modes "depth" and "movetime" are taking three additional parameters.
The third parameter denotes the lower bound, the fourth parameter
denotes the upper bound, both scores are in centi-pawns. The query succeeds
if the estimation is within the specified bounds (inclusive the ranges). If
the lower-bound value is specified with <i>unlimited</i>, it means negative
unlimited. If the upper-bound value is specified with <i>unlimited</i>, it means
positive unlimited. The fifth parameter is either <i>sidetomove</i> or <i>absolute</i>.
<i>sidetomove</i> means that the evaluation value depends on side to move, and
<i>absolute</i> means that the evaluation value is independent from side to move.
</p>

<p><img src='../images/note.png' alt='note' /> 
Please note that the modes "depth" and "mate" are available only if the engine
supports the UCI protocol. An engine restricted to the WinBoard/XBoard protocol
does only support the "movetime" mode.
</p>

<p>
Beispiele:
</p>

<div class='verb'><code>
<span class='keyword'>:evaluate</span> depth 4 2.5 unlimited sidetomove
</code></div>

<p>
Side to move has (possibly) a winning position, because he is
at least 2.5 pawn units ahead.
</p>

<div class='verb'><code>
<span class='keyword'>:evaluate</span> depth 4 unlimited -2.5 sidetomove
</code></div>

<p>
Side to move has (possibly) a losing position, because he is
at least 2.5 pawn units behind.
</p>

<div class='verb'><code>
<span class='keyword'>:evaluate</span> movetime 3000 unlimited -3.0 absolute
</code></div>

<p>
Black is (possibly) losing, because he is at least 3 pawn units behind.
</p>

<div class='verb'><code>
<span class='keyword'>:evaluate</span> mate 3
</code></div>

<p>
Either side is mate in maximal 3 moves.
</p>

<h3 id="position:exchangeevaluation">:exchangeevaluation&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Figurentauschbewertung)</span></h3>

<p>
This keyword is analyzing capture moves to see whether or not they appear
to be profitable.
</p>

<p>
The keyword match the current move if this value is in the specified range
(a lower and an upper value). Only capture moves will be evaluated.
If lower range is specified with <i>unlimited</i>, it means negative unlimited.
If the lower range is specified with <i>unlimited</i>, it means positive unlimited.
The exchange function is taking into account that exchanged pieces may be
pinned or defended by other pieces. The value of the function does not depend
on which side is to move.
</p>

<p>
Concerning the piece values see <a href="CQL-Position-List.html#position:power"><span style='white-space:nowrap;'>:power</span></a>.
</p>

<p>
Note that this function is not evaluating the position, instead it is
estimating the exchange values.
</p>

<p>
Beispiele:
</p>

<div class='verb'><code>
<span class='keyword'>:exchangeevaluation</span> unlimited 3
</code></div>

<p>
This move is (possibly) a blunder.
</p>

<h3 id="position:maxswapevaluation">:maxswapevaluation&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Maximum einer Schlagabtauschbewertung)</span></h3>

<p>
This keyword allows to estimate exchange values of possible moves. It takes
as arguments two piece designators followed by a range specifier. The first
argument specifies moving pieces, the second one specifies target squares.
For each possible moves we compute an integer value that is a material benefit
of the move (in pawns, like in case of the <a href="CQL-Position-List.html#position:power"><span style='white-space:nowrap;'>:power</span></a> keyword)
according to possible piece exchanges on the target square after the move.
After that the maximum of all computed values will be selected.
</p>

<p>
The keyword match the position if this value lies in the specified range
(a lower and an upper value). If lower range is specified with <i>unlimited</i>,
it means negative unlimited. If the lower range is specified with <i>unlimited</i>,
it means positive unlimited. The exchange function is taking into account that
exchanged pieces may be pinned or defended by other pieces. The value of the
function does not depend on which side is to move.
</p>

<p>
Note that this function is not evaluating the position, instead it is
estimating the exchange values.
</p>

<p>
Concerning the piece values see <a href="CQL-Position-List.html#position:power"><span style='white-space:nowrap;'>:power</span></a>.
</p>

<p><img src='../images/note.png' alt='note' /> 
This keyword is alike the keyword <span style='white-space:nowrap;'><code>:maxswapvalue</code></span> from Chess
Assistant 9 (&#x21d2;
<a href="http://hornid.com/chess/docs/CQL-3GX.pdf">The CQL 3.GX Extension<span class="awesome">&nbsp;&#xf08e;</span></a>),
but quite different implemented.
</p>

<p>
Beispiele:
</p>

<div class='verb'><code>
(position <span class='keyword'>:maxswapevaluation</span> A a 1 unlimited)
</code></div>

<p>
This query selects positions in which white threatens with
winning some material:
</p>

<div class='verb'><code>
(position <span class='keyword'>:maxswapevaluation</span> <span class='piece'>&#x2655;</span>?1-7 ??8 0 unlimited)
</code></div>

<p>
This query selects positions in which a white queen can invade rank 8
without a material loss.
</p>

<h3 id="position:moveevaluation">:moveevaluation&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Zugbewertung)</span></h3>

<div class='annotation'><img src='../images/annotation.png' style='float:left; margin:0 1em 0 0' alt='annotation' />
This is a very slow operation and should be restricted.
</div>

<p>
This keyword is matching the difference between the evaluation of the current
position and the evaluation of the preceding position. The evaluation will be
done with the help of an external chess engine. It takes seven parameters.
The first and second parameter are piece designators. The former is specifies
moving pieces, the second one specifies target squares.  The third and fourth
are depending on the search mode:
</p>

<ul style='list-style-type: none'><li>
  <table>
    <!-- UCI:  "go depth <x>" -->
    <tr>
      <td class="l"><span style='white-space:nowrap;'><code>depth &lt;d&gt;</code></span></td>
      <td class="r">search &lt;d&gt; plies only</td>
    </tr>

    <!-- UCI:  "go movetime <x>" -->
    <!-- WB:   "st <x>"       -->
    <tr>
      <td class="l"><span style='white-space:nowrap;'><code>movetime &lt;ms&gt;</code></span></td>
      <td class="r">search exactly &lt;ms&gt; milli-seconds per move</td>
    </tr>
  </table>
</li></ul>

<p>
The fifth parameter denotes the lower bound score, the sixth parameter denotes
the upper bound score, both scores are in centi-pawns. If the lower-bound value
is specified with <i>unlimited</i>, it means negative unlimited. If the upper-bound
value is specified with <i>unlimited</i>, it means positive unlimited. The query
succeeds if the scoring of this move is within the given bounds (inclusive the
ranges). The score of this move is the difference between the score of the
current board and the score of the last board. In case of mating positions
the difference will be always greater than 10.000.
</p>

<p><img src='../images/note.png' alt='note' /> 
Please note that the mode "depth" is available only if the engine suppoprts the
UCI protocol. An engine restricted to the WinBoard/XBoard protocol does only
support the "movetime" mode.
</p>

<p>
The seventh parameter is either <i>sidetomove</i> or <i>absolute</i>.
<i>sidetomove</i> means that the evaluation value depends on side to move, and
<i>absolute</i> means that the evaluation value is independent from side to move.
</p>

<p>
Beispiel:
</p>

<div class='verb'><code>
<span class='keyword'>:moveevaluation</span> U ? depth 4 3.0 unlimited sidetomove
</code></div>

<p>
Match first position were the evaluation score is at least 3.0 pawn units.
This means that last move was (possibly) a blunder.
</p>

<div class='verb'><code>
<span class='keyword'>:moveevaluation</span> A a depth 4 unlimited -3.0 absolute
</code></div>

<p>
Match first position were the evaluation score is at least 3.0 pawn units
better for black. This means that last white move was (possibly) a blunder.
Only capture moves will be evaluated.
</p>

<div class='box'><pre><code><!--
-->(match
  (position <span class='keyword'>:moveevaluation</span> [<span class='piece'>&#x2659;</span><span class='piece'>&#x265f;</span>] ?[a-h1,a-h8]
             unlimited 0.0 movetime 5000 absolute)
  (position <a href="CQL-Position-List.html#position:promotion"><span style='white-space:nowrap;'>:promotion</span></a> U <a href="CQL-Position-List.html#position:cut"><span style='white-space:nowrap;'>:cut</span></a>)))<!--
--></code></pre></div>

<p>
Search for positions where side to move is doing first promotion in game, but
without gaining a better score. We are ensuring that only promoting moves will
be evaluated.
</p>

<h2 id="accumulator">Schlüsselwörter für Akkumulationen</h2>

<p>
There are mainly two accumulator keywords, :accumulate and :sumrange. These
are used to accumulate and to test the number of transforms of the enclosing
position list that match the current position. Each time a transform of a
position list matches a position, the accumulator associated with that position
is incremented. Any position with a sum range can then test if the accumulator
is within a certain range.
</p>

<ul style='list-style-type: none'><li>
  <table>
    <tr><td>&#x2022;</td><td><a href="#position:accumulate">:accumulate</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:reset">:reset</a></td></tr>
    <tr><td>&#x2022;</td><td><a href="#position:sumrange">:sumrange</a></td></tr>
  </table>
</li></ul>

<h3 id="position:accumulate">:accumulate&emsp;<span class='normal'>(Akkumulieren)</span></h3>

<p>
This takes one parameter, the name of an accumulator. Each time the application
of some element of the transform set of the position list matches a position,
the accumulator associated with this name is incremented. The accumulator is
cleared when a new position is reached (and in consequence :accumulate should
not be used inside of <a href="CQL-Position-List.html#position:not"><span style='white-space:nowrap;'>:not</span></a>, or the
<a href="CQL-Position-List.html#position:sequence"><span style='white-space:nowrap;'>:sequence</span></a>, and <a href="CQL-Position-List.html#position:gappedsequence"><span style='white-space:nowrap;'>:gappedsequence</span></a> keywords).
This keyword inhibits short-circuiting of logical keywords
<a href="CQL-Position-List.html#position:and"><span style='white-space:nowrap;'>:and</span></a>, and <a href="CQL-Position-List.html#position:or"><span style='white-space:nowrap;'>:or</span></a>. Note that
<a href="CQL-Position-List.html#position:flipcolor"><span style='white-space:nowrap;'>:flipcolor</span></a> likely has unexpected results when used with
:accumulate, because the accumulator is not cleared between color flips.
</p>

<p>
For examples see:
<a href="CQL-Examples.html#accumulator">Using accumulators to count passed pawns</a>.
</p>

<h3 id="position:reset">:reset&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Zurücksetzen)</span></h3>

<p>
This keyword takes as a parameter the name of an accumulator. It clears the
accumulator associated with this name after applying a transformation.
</p>

<p>
Beispiel:
</p>

<p>
Tripled pawns can be found by the query:
</p>

<div class='box'><pre><code><!--
-->(position
  <span class='keyword'>:reset</span> acc
  <span class='piece'>&#x2659;</span>e2
  <a href="CQL-Position-List.html#position:accumulate"><span style='white-space:nowrap;'>:accumulate</span></a> acc
  <a href="CQL-Position-List.html#position:sumrange"><span style='white-space:nowrap;'>:sumrange</span></a> acc 3
  <a href="CQL-Position-List.html#position:shiftvertical"><span style='white-space:nowrap;'>:shiftvertical</span></a>
  <a href="CQL-Position-List.html#position:shifthorizontal"><span style='white-space:nowrap;'>:shifthorizontal</span></a>)<!--
--></code></pre></div>

<p>
Note that this is only an example for this keyword (taken from
<a href="http://hornid.com/chess/docs/CQL-3GX.pdf">The CQL 3.GX Extension<span class="awesome">&nbsp;&#xf08e;</span></a>),
it is not recommended to use this statement for triple pawn search.
A much better way is:
</p>

<div class='box'><pre><code><!--
-->(position
  <a href="CQL-Position-List.html#position:piececount"><span style='white-space:nowrap;'>:piececount</span></a> <span class='piece'>&#x2659;</span>a[3-7] 3 6
  <a href="CQL-Position-List.html#position:shifthorizontal"><span style='white-space:nowrap;'>:shifthorizontal</span></a>
  <a href="CQL-Position-List.html#position:flipcolor"><span style='white-space:nowrap;'>:flipcolor</span></a>))<!--
--></code></pre></div>

<h3 id="position:sumrange">:sumrange&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Ergebnisbereich)</span></h3>

<p>
This takes as parameter the name of an accumulator and a range specifer.
It matches a position if the value of the given accumulator lies within
the range specifier.
</p>

<p>
For examples see:
<a href="CQL-Examples.html#accumulator">Using accumulators to count passed pawns</a>.
</p>

<h2 id="tagging">Schlüsselwörter für das Markieren</h2>

<ul style='list-style-type: none'><li>
  <table>
    <tr><td>&#x2022;</td><td><a href="#position:tagmatch">:tagmatch</a></td></tr>
  </table>
</li></ul>

<h3 id="position:tagmatch">:tagmatch&ensp;<img src="../images/ft-scidb-tiny.png" alt="" /> &emsp;<span class='normal'>(Markierungsvergleich)</span></h3>

<p>
The :tagmatch keyword takes two parameters, the name of a tag and a piece
designator. It matches only if the piece corresonding to the named tag
matches the given piece designator. For more information, see the section
on <a href="CQL-Tagging.html">tagging</a>.
</p>
</span>

</body>
</html>
