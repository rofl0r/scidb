<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated from tcl/help/en/CQL-Piece-Designator-Transforms.txt -->

<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
<head>
  <meta http-equiv="content-type"
           content="text/html; charset=utf-8" />
  <meta http-equiv="content-language"
           content="en" />
  <meta http-equiv="content-style-type"
           content="text/css" />

  <meta name="generator"
     content="scidb.sourceforge.net" />
  <meta name="description"
     content="Scidb Help Page" />

  <link rel="icon"
       href="http://scidb.sourceforge.net/images/scidb.ico"
       type="image/x-icon" />
  <link rel="shortcut icon"
       href="http://scidb.sourceforge.net/images/scidb.ico" />
  <link rel="stylesheet"
       type="text/css"
      media="screen"
       href="../styles/help.css" />

  <title>Help: CQL - Transforms of piece designators</title>
</head>

<body>

<div class="title">
  <h1 class="title">CQL - Transforms of piece designators</h1>
</div>

<p>
Certain transforms are defined on piece designators.
</p>

<p>
A <b>diagonal flip transformation</b>, applied to a piece designator, reflects
each square in its square set about the main diagonal.
</p>

<table width="100%" border="0">
  <tr>
    <td align="center">
      <img src="../images/cql-flip-diagonal.png" alt="" />
    </td>
  </tr>
  <tr>
    <td align="center">
      Diagonal flip of <span style="white-space:nowrap;"><code><span class="chess">&#x2656;</span>a8</code></span> about the main diagonal.
    </td>
  </tr>
</table>

<p>
For example, the diagonal flip of <span style="white-space:nowrap;"><code>[Aa][a-h1-2,f6,h7]</code></span> is
<span style="white-space:nowrap;"><code>[Aa][a-b1-8,f6,g8]</code></span>.
</p>

<p>
An <b>off-diagonal flip transformation</b> applied to a piece designator
reflects each square in its square set about the a8 to h1 diagonal.
</p>

<table width="100%" border="0">
  <tr>
    <td align="center">
      <img src="../images/cql-flip-off-diagonal.png" alt="" />
    </td>
  </tr>
  <tr>
    <td align="center">
      Off-diagonal flip of <span style="white-space:nowrap;"><code><span class="chess">&#x2657;</span>b2</code></span> about the a8 to h1 diagonal.
    </td>
  </tr>
</table>

<p>
For example, the off-diagonal flip of <span style="white-space:nowrap;"><code><span class="chess">&#x2656;</span>a8</code></span> is <span style="white-space:nowrap;"><code><span class="chess">&#x2656;</span>a8</code></span>.
The off-diagonal flip of <span style="white-space:nowrap;"><code>[<span class="chess">&#x2657;</span><span class="chess">&#x265d;</span>][a1-8]</code></span>, denoting a bishop on the
a file, is <span style="white-space:nowrap;"><code>[<span class="chess">&#x2657;</span><span class="chess">&#x265d;</span>][a-h8]</code></span>, denoting a bishop on the eight rank.
</p>

<p>
A <b>vertical flip transformation</b> applied to a piece designator reflects
each square in its square set about the vertical bisector of the board. For
example, the vertical flip of <span style="white-space:nowrap;"><code>Uf6</code></span>, denoting a piece on f6, is
<span style="white-space:nowrap;"><code>Uc6</code></span>.
</p>

<table width="100%" border="0">
  <tr>
    <td align="center">
      <img src="../images/cql-flip-vertical.png" alt="" />
    </td>
  </tr>
  <tr>
    <td align="center">
      Vertical flip of <span style="white-space:nowrap;"><code><span class="chess">&#x265d;</span>f6</code></span> about the vertical bisector.
    </td>
  </tr>
</table>

<p>
A <b>horizontal flip transformation</b> applied to a piece designator
reflects each square in its square set about the horizontal bisector of
the board. For example, the horizontal flip of <span style="white-space:nowrap;"><code>Uf6</code></span> is
<span style="white-space:nowrap;"><code>Uf3</code></span>.
</p>

<table width="100%" border="0">
  <tr>
    <td align="center">
      <img src="../images/cql-flip-horizontal.png" alt="" />
    </td>
  </tr>
  <tr>
    <td align="center">
      Horizontal flip of <span style="white-space:nowrap;"><code><span class="chess">&#x265d;</span>f6</code></span> about the horizontal bisector.
    </td>
  </tr>
</table>

<p>
A <b>dihedral transformation</b> of a piece designator is either a flip
transformation or a rotation by 90 degrees of the chessboard followed by
a flip transformation or the identity transformation. There are 8 distinct
dihedral transformations of the board. For example, the results of
applying the 8 dihedral transformations to the piece designator
<span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>c2</code></span> are the 8 piece designators <span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>c2</code></span>,
<span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>b3</code></span>, <span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>b6</code></span>, <span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>c7</code></span>, <span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>f7</code></span>,
<span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>g6</code></span>, <span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>g3</code></span>, and <span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>f2</code></span>.
</p>

<table width="100%" border="0">
  <tr>
    <td align="center">
      <img src="../images/cql-flip-dihedral.png" alt="" />
    </td>
  </tr>
  <tr>
    <td align="center">
      Dihedral transformation of <span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>c2</code></span>.<br/>
      This is the sequence: diagonal flip (to b3),<br/>
      horizontal flip (to b6), off-diagonal flip (to c7),<br/>
      vertical flip (to f7), diagonal flip (to g6),<br/>
      horizontal flip (to g3), off-diagonal flip (to f2).<br/>
    </td>
  </tr>
</table>

<p>
A <b>unit right shift transformation</b>, applied to a piece designator,
shifts each square in its square set over to the right one square. If a
square is already at the right edge of the board, it is removed from the
square set. If a square is at the left edge of the board, it is also added
to the new square set.
</p>

<p>
For example, the unit right shift transformation of <span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>d4</code></span> is
<span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>e4</code></span>. The unit right shift transformation of <span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>[c2,h2]</code></span>
is <span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>d2</code></span>. The unit right shift transformation of
<span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>[a2,c2,h2]</code></span> is <span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>[b2,d2]</code></span>.
</p>

<p>
The definitions of <b>unit left shift transformation</b>, <b>unit up shift
transformation</b> and <b>unit down shift transformation</b> are similar to that
of unit right shift transformation, with of course the location of the
appropriate board edges altering mutatis mutandis.
</p>

<p>
A <b>right transformation</b> is a composition of zero or more unit right
transformations. For example, the right transformation comprising three
successive unit right transformations applied to <span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>a4</code></span> is
<span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>[a4,b4,c4,d4]</code></span>, since squares on the left edge of the board are
always included in the new set. The result of applying this right
transformation to <span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>d4</code></span> is <span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>g4</code></span>.
</p>

<p>
Similar definitions apply for <b>left transformation</b>, <b>up
transformation</b>, and <b>down transformation</b>.
</p>

<p>
A <b>horizontal shift transformation</b> is either a left or a right
transformation. A <b>vertical shift transformation</b> is either a down
or an up transformation.
</p>

<p>
A <b>shift transformation</b> is a transformation that can be written as
zero or more horizontal shift transformations followed by zero or more
vertical shift transformations. There is exactly one shift transformation
that sends a given square to another given square. One possible shift
transformation of <span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>[b3,c4]</code></span> is <span style="white-space:nowrap;"><code><span class="chess">&#x2655;</span>[d4,e5]</code></span>.
</p>

<p>
A <b>color flip transformation</b> of a piece designator switches the colors
of each piecetype in the piece set of the piece designator, and then applies
a horizontal flip to the piece designator. For example, the color flip
transformation applied to <span style="white-space:nowrap;"><code>[<span class="chess">&#x2656;</span><span class="chess">&#x265d;</span><span class="chess">&#x265f;</span>][a2,c2]</code></span>, either a white rook,
a black bishop, or a black pawn on either c2 or a2, is
<span style="white-space:nowrap;"><code>[<span class="chess">&#x265c;</span><span class="chess">&#x2657;</span><span class="chess">&#x2659;</span>][a7,c7]</code></span>.
</p>

</body>
</html>
